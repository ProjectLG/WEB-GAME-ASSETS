! function(t) {
    "use strict";
    var e = function(t, n) {
        return e = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n])
        }, e(t, n)
    };

    function n(t, n) {
        if ("function" != typeof n && null !== n) throw new TypeError("Class extends value " + String(n) + " is not a constructor or null");

        function i() {
            this.constructor = t
        }
        e(t, n), t.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype, new i)
    }
    var i = function() {
        return i = Object.assign || function(t) {
            for (var e, n = 1, i = arguments.length; n < i; n++)
                for (var o in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
            return t
        }, i.apply(this, arguments)
    };

    function o(t, e, n, i) {
        return new(n || (n = Promise))((function(o, r) {
            function s(t) {
                try {
                    d(i.next(t))
                } catch (t) {
                    r(t)
                }
            }

            function a(t) {
                try {
                    d(i.throw(t))
                } catch (t) {
                    r(t)
                }
            }

            function d(t) {
                var e;
                t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n((function(t) {
                    t(e)
                }))).then(s, a)
            }
            d((i = i.apply(t, e || [])).next())
        }))
    }

    function r(t, e) {
        var n, i, o, r, s = {
            label: 0,
            sent: function() {
                if (1 & o[0]) throw o[1];
                return o[1]
            },
            trys: [],
            ops: []
        };
        return r = {
            next: a(0),
            throw: a(1),
            return: a(2)
        }, "function" == typeof Symbol && (r[Symbol.iterator] = function() {
            return this
        }), r;

        function a(r) {
            return function(a) {
                return function(r) {
                    if (n) throw new TypeError("Generator is already executing.");
                    for (; s;) try {
                        if (n = 1, i && (o = 2 & r[0] ? i.return : r[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, r[1])).done) return o;
                        switch (i = 0, o && (r = [2 & r[0], o.value]), r[0]) {
                            case 0:
                            case 1:
                                o = r;
                                break;
                            case 4:
                                return s.label++, {
                                    value: r[1],
                                    done: !1
                                };
                            case 5:
                                s.label++, i = r[1], r = [0];
                                continue;
                            case 7:
                                r = s.ops.pop(), s.trys.pop();
                                continue;
                            default:
                                if (!(o = s.trys, (o = o.length > 0 && o[o.length - 1]) || 6 !== r[0] && 2 !== r[0])) {
                                    s = 0;
                                    continue
                                }
                                if (3 === r[0] && (!o || r[1] > o[0] && r[1] < o[3])) {
                                    s.label = r[1];
                                    break
                                }
                                if (6 === r[0] && s.label < o[1]) {
                                    s.label = o[1], o = r;
                                    break
                                }
                                if (o && s.label < o[2]) {
                                    s.label = o[2], s.ops.push(r);
                                    break
                                }
                                o[2] && s.ops.pop(), s.trys.pop();
                                continue
                        }
                        r = e.call(t, s)
                    } catch (t) {
                        r = [6, t], i = 0
                    } finally {
                        n = o = 0
                    }
                    if (5 & r[0]) throw r[1];
                    return {
                        value: r[0] ? r[1] : void 0,
                        done: !0
                    }
                }([r, a])
            }
        }
    }

    function s(t, e, n) {
        if (n || 2 === arguments.length)
            for (var i, o = 0, r = e.length; o < r; o++) !i && o in e || (i || (i = Array.prototype.slice.call(e, 0, o)), i[o] = e[o]);
        return t.concat(i || Array.prototype.slice.call(e))
    }
    var a, d, u, c = function() {
            function t(e, n, i) {
                this.channelId = e, this.platformId = n, this.remoteUrl = null != i ? i : t.DEFAULT_REMOTE_ADS_CONFIG_URL
            }
            return t.prototype.get = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                if (!(t && this.platformId && this.channelId)) throw new Error("gameId, platformId and channelId are required to retrieve remote ads config");
                                return [4, fetch(this.getRemoteConfigUrl(t))];
                            case 1:
                                if (!(e = n.sent()).ok) throw new Error(e.statusText);
                                return [4, e.json()];
                            case 2:
                                return [2, n.sent()]
                        }
                    }))
                }))
            }, t.prototype.getRemoteConfigUrl = function(t) {
                return this.remoteUrl.replace("{GAME}", t).replace("{PLATFORM}", this.platformId).replace("{CHANNEL}", this.channelId)
            }, t.DEFAULT_REMOTE_ADS_CONFIG_URL = "https://fran-cdn.frvr.com/configs/ads/{GAME}/{PLATFORM}/{CHANNEL}/sdk.json", t
        }(),
        l = function() {
            function t() {
                var t = this;
                this._promise = new Promise((function(e, n) {
                    t._resolve = e, t._reject = n
                }))
            }
            return Object.defineProperty(t.prototype, "promise", {
                get: function() {
                    return this._promise
                },
                enumerable: !1,
                configurable: !0
            }), t.prototype.resolve = function(t) {
                this._resolve(t)
            }, t.prototype.reject = function(t) {
                this._reject(t)
            }, t
        }(),
        h = function() {
            function t() {}
            return t.isCrossDomainFrame = function() {
                if (window.parent === window) return !1;
                var t = new URL(window.document.referrer);
                return t.protocol !== window.location.protocol || t.hostname !== window.location.hostname || t.port !== window.location.port
            }, t.getBrowserWidth = function() {
                var e, n, i = t.isCrossDomainFrame() ? window : window.top || window,
                    o = i.outerWidth || 9999;
                return n = void 0 !== i.innerWidth ? i.innerWidth : void 0 !== i.document.documentElement && void 0 !== i.document.documentElement.clientWidth && 0 !== i.document.documentElement.clientWidth ? i.document.documentElement.clientWidth : null === (e = i.document.body) || void 0 === e ? void 0 : e.clientWidth, Math.min(n, o)
            }, t.getBrowserHeight = function() {
                var e, n, i = t.isCrossDomainFrame() ? window : window.top || window,
                    o = i.outerHeight || 9999;
                return n = void 0 !== i.innerHeight ? i.innerHeight : void 0 !== i.document.documentElement && void 0 !== i.document.documentElement.clientHeight && 0 !== i.document.documentElement.clientHeight ? i.document.documentElement.clientHeight : null === (e = i.document.body) || void 0 === e ? void 0 : e.clientHeight, Math.min(n, o)
            }, t.isInterstitial = function(t) {
                return t.ortb2Imp && t.ortb2Imp.instl && 1 === t.ortb2Imp.instl
            }, t.filterAdUnitSizes = function(e, n, i, o) {
                var r = n.mediaTypes || {},
                    s = t.isInterstitial(n);
                i = i || t.getBrowserWidth(), o = o || t.getBrowserHeight(), r.banner && (Array.isArray(r.banner.sizes) && r.banner.sizes.length > 0 || (r.banner.sizes = e.banner), s && (i *= .9, o *= .9), r.banner.sizes = t.filterSizesArray(r.banner.sizes, i, o)), r.video && (r.video.playerSize && Array.isArray(r.video.playerSize) && r.video.playerSize.length > 0 || (r.video.playerSize = t.filterSizesArray(e.video, i, o)[0]))
            }, t.generateUUID = function() {
                if (window.crypto && window.crypto.randomUUID) return window.crypto.randomUUID();
                var t = (new Date).getTime(),
                    e = "undefined" != typeof performance && performance.now && 1e3 * performance.now() || 0;
                return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function(n) {
                    var i = 16 * Math.random();
                    return t > 0 ? (i = (t + i) % 16 | 0, t = Math.floor(t / 16)) : (i = (e + i) % 16 | 0, e = Math.floor(e / 16)), ("x" === n ? i : 3 & i | 8).toString(16)
                }))
            }, t.loadScript = function(t) {
                var e = document.createElement("script");
                return e.type = "text/javascript", e.async = !0, e.src = t, document.head.appendChild(e)
            }, t.overridePollfishContainerZIndex = function(t) {
                var e = document.getElementById("pollfishSurveyContainer");
                e && (e.style["z-index"] = t)
            }, t.loadGPT = function(e) {
                if (!t.gptLoaded) {
                    if (window.googletag && window.googletag.apiReady) return;
                    var n = t.DEFAULT_GPT_URL,
                        i = t.DEFAULT_PUBADS_URL;
                    e && (e.url && (n = e.url), e.pubadsUrl && (i = e.pubadsUrl)), t.loadScript(n), t.loadScript(i), t.gptLoaded = !0
                }
            }, t.loadPrebid = function(e) {
                if (!t.prebidLoaded) {
                    var n = t.DEFAULT_PREBID_URL;
                    e && e.url && (n = e.url), t.loadScript(n), t.prebidLoaded = !0
                }
            }, t.loadPollfish = function(e) {
                if (!t.pollfishLoaded) {
                    var n = t.DEFAULT_JQUERY_URL,
                        o = t.DEFAULT_POLLFISH_SDK_URL;
                    e && (e.jqueryUrl && (n = e.jqueryUrl), e.pollfishSdkUrl && (o = e.pollfishSdkUrl)), t.loadScript(n).onload = function() {
                        t.loadScript(o)
                    }, window.pollfishConfig = i(i({}, window.pollfishConfig || {}), {
                        api_key: e.apiKey,
                        debug: !!e.debug
                    }), t.pollfishLoaded = !0
                }
            }, t.loadIMA = function(e) {
                if (!t.imaLoaded) {
                    var n = t.DEFAULT_IMA_URL;
                    e && e.url && (n = e.url);
                    var i = t.loadScript(n);
                    i.onerror = function(e) {
                        t.imaReady.reject(e)
                    }, i.onload = function() {
                        t.imaReady.resolve()
                    }, t.imaLoaded = !0
                }
            }, t.loadApsTag = function(e) {
                !t.apsTagLoaded && e && e.pubID && (! function(t, n, i, o, r, s, a) {
                    function d(e, i) {
                        n[t]._Q.push([e, i])
                    }
                    n[t] || (n[t] = {
                        init: function() {
                            d("i", arguments)
                        },
                        fetchBids: function() {
                            d("f", arguments)
                        },
                        setDisplayBids: function() {},
                        targetingKeys: function() {
                            return []
                        },
                        _Q: []
                    }, (s = i.createElement(o)).async = !0, s.src = "//c.amazon-adsystem.com/aax2/apstag.js", (a = i.getElementsByTagName(o)[0]).parentNode.insertBefore(s, a), n[t].init({
                        pubID: e.pubID,
                        adServer: "googletag",
                        videoAdServer: "DFP"
                    }))
                }("apstag", window, document, "script"), t.apsTagLoaded = !0)
            }, t.onIMAReady = function() {
                return this.imaReady.promise
            }, t.initializePrebid = function(e) {
                var n = (e = e || {}).config || {},
                    i = e.analytics || {},
                    o = t.getPrebidS2SAliases(null == n ? void 0 : n.s2sConfig);
                o && o.length && window.pbjs.que.push((function() {
                    o.forEach((function(t) {
                        var e;
                        null === (e = window.pbjs) || void 0 === e || e.aliasBidder(t.bidder, t.alias)
                    }))
                })), window.pbjs.que.push((function() {
                    t.prebidInitialized || (i && i.enabled && window.pbjs.que.push((function() {
                        window.pbjs.enableAnalytics({
                            provider: i.provider,
                            options: i.options
                        })
                    })), window.pbjs.setConfig(n), t.prebidInitialized = !0)
                }))
            }, t.setPrebidPageUrl = function(t) {
                t && window.pbjs && window.pbjs.que && window.pbjs.que.push((function() {
                    window.pbjs.setConfig({
                        pageUrl: t
                    })
                }))
            }, t.addPrebidAdUnit = function(t) {
                window.pbjs.que.push((function() {
                    window.pbjs.addAdUnits(t)
                }))
            }, t.stringToHTMLElement = function(t) {
                var e = document.createElement("div");
                return e.innerHTML = t.trim(), e.firstChild
            }, t.isIMAPresent = function() {
                return window.google && window.google.ima
            }, t.toUrlQueryParameters = function(t) {
                var e = [];
                for (var n in t)({}).hasOwnProperty.call(t, n) && e.push(encodeURIComponent(n) + "=" + encodeURIComponent(t[n]));
                return e.join("&")
            }, t.extractParamsFromUrl = function(e) {
                var n = e.split("?");
                return 2 === n.length ? t.parseParameters(n[1]) : {}
            }, t.parseParameters = function(t) {
                return function(t) {
                    var e = {};
                    return t.replace(/([^=&]+)=([^&]*)/g, (function(t, n, i) {
                        var o = decodeURIComponent(i);
                        o && "undefined" !== o && (e[decodeURIComponent(n)] = decodeURIComponent(i))
                    })), e
                }(t)
            }, t.isHTMLElementInViewport = function(t) {
                var e, n;
                if (!t) return !1;
                if (window) {
                    var i = t.getBoundingClientRect(),
                        o = window.innerHeight || (null === (e = window.document.documentElement) || void 0 === e ? void 0 : e.clientHeight),
                        r = window.innerWidth || (null === (n = window.document.documentElement) || void 0 === n ? void 0 : n.clientWidth),
                        s = i.top <= o && i.top + i.height >= 0,
                        a = i.left <= r && i.left + i.width >= 0;
                    return i.bottom > 0 && i.right > 0 && s && a
                }
                return !1
            }, t.isHTMLElementVisible = function(e) {
                return !!e && (!!(e.offsetWidth || e.offsetHeight || e.getClientRects().length) && t.isHTMLElementInViewport(e))
            }, t.isTabVisible = function() {
                var t;
                return "hidden" !== (null === (t = null === window || void 0 === window ? void 0 : window.document) || void 0 === t ? void 0 : t.visibilityState)
            }, t.isFunction = function(t) {
                return !!(t && t.constructor && t.call && t.apply)
            }, t.toUAMAdUnit = function(e) {
                var n, i, o, r, s = t.isFunction(e.code) ? e.code() : e.code;
                return {
                    slotName: s,
                    slotID: s,
                    sizes: (null === (i = null === (n = e.mediaTypes) || void 0 === n ? void 0 : n.banner) || void 0 === i ? void 0 : i.sizes) || [].concat(null === (r = null === (o = e.mediaTypes) || void 0 === o ? void 0 : o.video) || void 0 === r ? void 0 : r.playerSize)
                }
            }, t.mergeVendorConsents = function(t, e) {
                null != t || (t = {}), null != e || (e = {});
                var n = i(i({}, t), e);
                return Object.keys(n).forEach((function(i) {
                    n[i] = !!t[i] || !!e[i]
                })), n
            }, t.adUnitPath2NetworkAndCode = function(t) {
                var e = (t || "").split("/").filter(Boolean);
                return e.length >= 2 ? {
                    network: e[0],
                    code: e[e.length - 1]
                } : null
            }, t.getPrebidS2SAliases = function(t) {
                var e = [];
                return t && t.length && t.forEach((function(t) {
                    var n;
                    if (t.enabled && (null === (n = t.extPrebid) || void 0 === n ? void 0 : n.aliases)) {
                        var i = Object.keys(t.extPrebid.aliases).map((function(e) {
                            return {
                                bidder: t.extPrebid.aliases[e],
                                alias: e
                            }
                        }));
                        e = e.concat(i)
                    }
                })), e
            }, t.filterSizesArray = function(t, e, n) {
                var i = [];
                return t.forEach((function(t) {
                    t[0] <= e && t[1] <= n && i.push(t)
                })), i
            }, t.imaReady = new l, t.GOOGLE_VENDOR_ID = 755, t.TCF_P1_CONSENT = 1, t.TCF_P4_CONSENT = 4, t.DEFAULT_GPT_URL = "https://fran-cdn.frvr.com/gpt_2023022201.js", t.DEFAULT_PUBADS_URL = "https://fran-cdn.frvr.com/pubads_2023022201.js", t.DEFAULT_PREBID_URL = "https://fran-cdn.frvr.com/prebid.7.23.0.js", t.DEFAULT_IMA_URL = "https://imasdk.googleapis.com/js/sdkloader/ima3.js", t.DEFAULT_JQUERY_URL = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js", t.DEFAULT_POLLFISH_SDK_URL = "https://storage.googleapis.com/pollfish_production/sdk/webplugin/pollfish.min.js", t.prebidLoaded = !1, t.prebidInitialized = !1, t.gptLoaded = !1, t.imaLoaded = !1, t.apsTagLoaded = !1, t.pollfishLoaded = !1, t
        }();
    ! function(t) {
        t.INTERSTITIAL = "interstitial", t.REWARD = "reward", t.BANNER = "banner", t.SURVEY = "survey", t.REWARDED_INTERSTITIAL = "rewarded-interstitial"
    }(d || (d = {})), (a = {})[d.INTERSTITIAL] = {
        stopsGameFlow: !0,
        throttleable: !0
    }, a[d.REWARD] = {
            stopsGameFlow: !0,
            throttleable: !1
        }, a[d.BANNER] = {
            stopsGameFlow: !1,
            throttleable: !1
        }, a[d.SURVEY] = {
            stopsGameFlow: !0,
            throttleable: !0
        }, a[d.REWARDED_INTERSTITIAL] = {
            stopsGameFlow: !0,
            throttleable: !0
        },
        function(t) {
            t.DEVELOPMENT = "dev", t.BETA = "beta", t.PRODUCTION = "prod"
        }(u || (u = {}));
    var p, g = {
            log: function() {},
            error: function() {},
            warn: function() {},
            info: function() {},
            debug: function() {}
        },
        f = function() {
            function t(t) {
                var e = t.provider,
                    n = t.logger;
                this.provider = e, this.logger = n || g
            }
            return t.prototype.setItems = function(t) {
                var e = t.map((function(t) {
                    var e = t.key,
                        n = t.value;
                    return {
                        key: e,
                        value: JSON.stringify(n)
                    }
                }));
                return this.provider.setItems(e)
            }, t.prototype.getItems = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e, n, i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, this.provider.getItems(t)];
                            case 1:
                                for (i in e = o.sent(), n = {}, e) try {
                                    n[i] = JSON.parse(e[i])
                                } catch (t) {
                                    this.logger.error("[storage] parsing error on key ".concat(i), t.message)
                                }
                                return [2, n]
                        }
                    }))
                }))
            }, t.prototype.removeItems = function(t) {
                return this.provider.removeItems(t)
            }, t.prototype.setItem = function(t, e) {
                return this.provider.setItems([{
                    key: t,
                    value: JSON.stringify(e)
                }])
            }, t.prototype.getItem = function(t, e) {
                return o(this, void 0, void 0, (function() {
                    var n, i, o;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, this.provider.getItems([t])];
                            case 1:
                                n = r.sent();
                                try {
                                    o = n[t], i = void 0 !== o ? JSON.parse(o) : e
                                } catch (n) {
                                    i = e, this.logger.error("[storage] parsing error on key ".concat(t), n.message)
                                }
                                return [2, i]
                        }
                    }))
                }))
            }, t.prototype.removeItem = function(t) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        return [2, this.provider.removeItems([t])]
                    }))
                }))
            }, t.prototype.isPersistent = function() {
                return this.provider.isPersistent()
            }, t
        }(),
        v = function() {
            function t() {
                this.values = {}
            }
            return t.prototype.setItems = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e, n, i;
                    return r(this, (function(o) {
                        for (e = 0, n = t; e < n.length; e++) i = n[e], this.values[i.key] = i.value;
                        return [2]
                    }))
                }))
            }, t.prototype.getItems = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e, n, i, o, s;
                    return r(this, (function(r) {
                        for (e = {}, n = 0, i = t; n < i.length; n++) o = i[n], void 0 !== (s = this.values[o]) && (e[o] = s);
                        return [2, e]
                    }))
                }))
            }, t.prototype.removeItems = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e, n, i;
                    return r(this, (function(o) {
                        for (e = 0, n = t; e < n.length; e++) i = n[e], delete this.values[i];
                        return [2]
                    }))
                }))
            }, t.prototype.isPersistent = function() {
                return !1
            }, t.providerName = "memory", t
        }();
    new f({
            provider: new v
        }),
        function(t) {
            t[t.None = 0] = "None", t[t.P1StoreInformationOnADevice = 2] = "P1StoreInformationOnADevice", t[t.P2SelectBasicAds = 4] = "P2SelectBasicAds", t[t.P3PersonalizedAdsProfile = 8] = "P3PersonalizedAdsProfile", t[t.P4PersonalizedAds = 16] = "P4PersonalizedAds", t[t.P5PersonalizedContentProfile = 32] = "P5PersonalizedContentProfile", t[t.P6PersonalizedContent = 64] = "P6PersonalizedContent", t[t.P7MeasureAdPerformance = 128] = "P7MeasureAdPerformance", t[t.P8MeasureContentPerformance = 256] = "P8MeasureContentPerformance", t[t.P9MarketResearchForAudienceInsights = 512] = "P9MarketResearchForAudienceInsights", t[t.P10DevelopAndImproveProducts = 1024] = "P10DevelopAndImproveProducts", t[t.All = 2046] = "All"
        }(p || (p = {}));
    var m, y, w, b, A, E = {
        consentToTerms: function() {},
        onConsentChanged: function(t) {},
        hasConsentForAll: function(t, e) {
            return !0
        },
        hasConsentForAny: function(t, e) {
            return !0
        },
        consents: function() {
            return p.All
        },
        legitimateInterests: function() {
            return p.All
        },
        hasLoaded: function() {
            return !0
        }
    };
    ! function(t) {
        t.AD_CLOSED = "adclosed", t.AD_LEAVING_APPLICATION = "adleavingapplication", t.CANCELED = "canceled", t.ERROR = "error", t.INTERNAL_ERROR = "internalerror", t.INVALID_REQUEST = "invalidrequest", t.NETWORK_ERROR = "networkerror", t.NOFILL = "nofill", t.SUCCESS = "success", t.THROTTLED = "throttled", t.TIMEOUT = "timeout"
    }(y || (y = {})),
    function(t) {
        t.ERROR = "error", t.NOFILL = "nofill", t.SKIPPED = "skipped", t.SUCCESS = "success", t.TIMEDOUT = "timedout"
    }(w || (w = {})), (m = {})[d.INTERSTITIAL] = "mandatory", m[d.REWARD] = "rewarded",
        function(t) {
            t.DELIVERED = "delivered", t.COMPLETED = "completed"
        }(b || (b = {})),
        function(t) {
            t.ON_LOAD = "on_load", t.ON_SHOW = "on_show", t.BLOCKED = "blocked", t.NOFILL = "nofill", t.TIMED_OUT = "timed_out"
        }(A || (A = {}));
    var P, S, I, C, T = function() {
        function t(t) {
            this.type = t
        }
        return t.prototype.getName = function() {
            return "dev"
        }, t.prototype.getType = function() {
            return this.type
        }, t.prototype.isReady = function() {
            return !0
        }, t.prototype.useManualControl = function() {
            return !1
        }, t.prototype.init = function(t, e, n) {
            var i = this;
            return this.tracker = n, new Promise((function(t) {
                setTimeout((function() {
                    console.log("[dev] ".concat(i.type, " ad initialised")), t()
                }), 100)
            }))
        }, t.prototype.show = function() {
            var t, e, n, i, o;
            null === (t = this.tracker) || void 0 === t || t.requestingAd(), null === (e = this.tracker) || void 0 === e || e.receivedAdResponse(y.SUCCESS), null === (n = this.tracker) || void 0 === n || n.willShowAd(!1), console.log("[dev] ".concat(this.type, " ad displayed"));
            var r = confirm("Want to check out this ad?");
            r ? (console.log("[dev] ".concat(this.type, " ad checked")), null === (i = this.tracker) || void 0 === i || i.finishedAd(w.SUCCESS)) : (console.log("[dev] ".concat(this.type, " ad skipped/dismissed")), null === (o = this.tracker) || void 0 === o || o.finishedAd(w.SKIPPED));
            var s = {
                success: !0,
                code: r ? b.COMPLETED : b.DELIVERED
            };
            return Promise.resolve(s)
        }, t
    }();
    ! function(t) {
        function e() {
            return t.call(this, d.INTERSTITIAL) || this
        }
        n(e, t)
    }(T),
    function(t) {
        function e() {
            return t.call(this, d.REWARD) || this
        }
        n(e, t)
    }(T),
    function(t) {
        t[t.NO_THROTTLING = 0] = "NO_THROTTLING", t.INIT_TIME = "INIT_TIME", t.FREQUENCY = "FREQUENCY"
    }(P || (P = {})),
    function(t) {
        t.NOT_DISPLAYED = "not_displayed", t.DELIVERED = "delivered", t.COMPLETED = "completed"
    }(S || (S = {})),
    function(t) {
        t.DISPLAY = "display", t.VIDEO = "video", t.SURVEY = "survey"
    }(I || (I = {})),
    function(t) {
        t.IDFA = "idfa", t.GAID = "gaid", t.SAMSUNG = "tifa"
    }(C || (C = {}));
    var U = function() {
        function t() {}
        return t.prototype.debug = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            console.debug(JSON.stringify(t))
        }, t.prototype.error = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            console.error(JSON.stringify(t))
        }, t.prototype.info = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            console.info(JSON.stringify(t))
        }, t.prototype.log = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            console.log(JSON.stringify(t))
        }, t.prototype.warn = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            console.warn(JSON.stringify(t))
        }, t
    }();
    window.pbjs = window.pbjs || {}, window.pbjs.que = window.pbjs.que || [], window.googletag = window.googletag || {}, window.googletag.cmd = window.googletag.cmd || [];
    var L = function() {
            function t(t, e, n) {
                this.PROVIDER = "fran", this.DEFAULT_REFRESH_INTERVAL = 61e3, this.hasP1Consent = !0, this.hasP4Consent = !0, this.isInitialized = !1, this.isAdAvailable = !1, this.isPreloadingAd = !1, this.defaultSizes = {
                    banner: [
                        [1024, 768],
                        [768, 1024],
                        [480, 320],
                        [336, 280],
                        [320, 480],
                        [300, 600],
                        [300, 250],
                        [250, 250],
                        [728, 90]
                    ],
                    video: [
                        [1024, 768],
                        [768, 1024],
                        [640, 480],
                        [640, 390],
                        [640, 360],
                        [480, 320],
                        [400, 300],
                        [400, 225],
                        [390, 640],
                        [320, 480]
                    ]
                }, this.volume = 1, this.defaultTimeoutMS = 2500, this.preloadTimeout = null, this.type = t, this.mediaType = e, this.logger = n || new U
            }
            return t.prototype.getName = function() {
                return this.PROVIDER + "#" + this.mediaType
            }, t.prototype.getType = function() {
                return this.type
            }, t.prototype.useManualControl = function() {
                return !1
            }, t.prototype.init = function(t, e, n) {
                var i, s, a, u, c, l, p;
                return o(this, void 0, void 0, (function() {
                    var o, g = this;
                    return r(this, (function(r) {
                        if (this.controls = e, this.tracker = n, !((o = t.config).adUnit || o.adUnits && Array.isArray(o.adUnits) && 0 !== o.adUnits.length)) throw null === (i = this.logger) || void 0 === i || i.error("".concat(this.getFullName(), ": adUnit or adUnits is required")), new Error("".concat(this.getFullName(), ": adUnit or adUnits is required"));
                        return o.adUnit && (null !== (s = (l = o.adUnit).timeout) && void 0 !== s || (l.timeout = (null === (u = null === (a = null === window || void 0 === window ? void 0 : window.pbjs) || void 0 === a ? void 0 : a.getConfig) || void 0 === u ? void 0 : u.call(a, "bidderTimeout")) || this.defaultTimeoutMS), o.adUnit.code = h.isFunction(o.adUnit.code) ? o.adUnit.code() : o.adUnit.code, null !== (c = (p = o.adUnit).uam) && void 0 !== c || (p.uam = !!window.apstag)), o.adUnits && o.adUnits.forEach((function(t) {
                            return t.code = h.isFunction(t.code) ? t.code() : t.code
                        })), this.config = JSON.parse(JSON.stringify(o)), this.adUnit = o.adUnit, this.adUnits = this.config.adUnits, window.addEventListener("resize", (function() {
                            g.reset()
                        })), this.adUnit && this.type != d.BANNER && h.filterAdUnitSizes(this.defaultSizes, this.adUnit), this.isInitialized = !0, [2]
                    }))
                }))
            }, t.prototype.show = function() {
                var t, e;
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(n) {
                        return this.isInitialized ? this.isAdAvailable ? [2, {
                            success: !0,
                            code: b.COMPLETED
                        }] : (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": no ad available")), [2, {
                            success: !1,
                            code: A.ON_SHOW,
                            message: "".concat(this.getFullName(), ": no ad available")
                        }]) : (null === (t = this.logger) || void 0 === t || t.error("".concat(this.getFullName(), ": not initialized, call init()")), [2, {
                            success: !1,
                            code: A.ON_SHOW,
                            message: "".concat(this.getFullName(), ": not initialized, call init()")
                        }])
                    }))
                }))
            }, t.prototype.preload = function() {
                var t, e, n;
                return o(this, void 0, void 0, (function() {
                    var i = this;
                    return r(this, (function(o) {
                        return this.isInitialized ? this.isAdAvailable ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": an ad is already available")), [2, {
                            success: !1,
                            code: A.ON_LOAD,
                            message: "".concat(this.getFullName(), ": an ad is already available")
                        }]) : (this.isPreloadingAd || (this.isAdAvailable = !1, this.isPreloadingAd = !0, setTimeout((function() {
                            i.isPreloadingAd && i.reset()
                        }), 5e3), null === (n = this.logger) || void 0 === n || n.debug("".concat(this.getFullName(), ": preloading ad"))), [2, {
                            success: !0,
                            code: b.DELIVERED
                        }]) : (null === (t = this.logger) || void 0 === t || t.error("".concat(this.getFullName(), ": not initialized, call init()")), [2, {
                            success: !1,
                            code: A.ON_LOAD,
                            message: "".concat(this.getFullName(), ": not initialized, call init()")
                        }])
                    }))
                }))
            }, t.prototype.reset = function() {
                this.isPreloadingAd = !1, this.isAdAvailable = !1
            }, t.prototype.getFullName = function() {
                return this.getName() + "#" + this.getType()
            }, t.prototype.getMediaType = function() {
                return this.mediaType
            }, t.prototype.getUserP1Consent = function() {
                return this.hasP1Consent
            }, t.prototype.setUserP1Consent = function(t) {
                this.hasP1Consent = t
            }, t.prototype.getUserP4Consent = function() {
                return this.hasP1Consent
            }, t.prototype.setUserP4Consent = function(t) {
                this.hasP4Consent = t
            }, t.prototype.getVendorConsent = function(t) {
                return !this.vendorConsents || this.vendorConsents[t]
            }, t.prototype.setVendorConsents = function(t) {
                this.vendorConsents = t
            }, t.prototype.setDeviceId = function(t) {
                this.deviceId = t
            }, t.prototype.setPublisherProvidedId = function(t) {
                this.ppid = t
            }, t.prototype.getDeviceIdTargeting = function() {
                if (!this.deviceId) return null;
                var t = {
                    rdid: this.deviceId.value,
                    is_lat: this.getUserP1Consent() ? "0" : "1"
                };
                switch (this.deviceId.type) {
                    case C.IDFA:
                        return t.idtype = "idfa", t;
                    case C.GAID:
                        return t.idtype = "adid", t;
                    case C.SAMSUNG:
                        return t.idtype = "tifa", t;
                    default:
                        return null
                }
            }, t.prototype.getVolume = function() {
                return this.volume
            }, t.prototype.setVolume = function(t) {
                (t < 0 || t > 1) && (t = 1), this.volume = t
            }, t.prototype.getAdUnitCode = function() {
                return this.adUnit ? h.isFunction(this.adUnit.code) ? this.adUnit.code() : this.adUnit.code : this.adUnits ? this.adUnits.map((function(t) {
                    return t.code
                })).join(",") : void 0
            }, t
        }(),
        R = function(t) {
            function e(e, n) {
                var i = t.call(this, e, I.DISPLAY, n) || this;
                return i.adPreloading = null, i.adSlot = null, i
            }
            return n(e, t), e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    var o = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, i)];
                            case 1:
                                return r.sent(), window.googletag.cmd.push((function() {
                                    o.config.pageUrl && window.googletag.pubads().set("page_url", o.config.pageUrl), window.googletag.pubads().addEventListener("slotRenderEnded", (function(t) {
                                        var e, n, i, r;
                                        o.adSlot === t.slot && (o.isAdAvailable = !t.isEmpty, o.isPreloadingAd = !1, o.isAdAvailable ? (null === (e = o.logger) || void 0 === e || e.debug("".concat(o.getFullName(), ": ad filled")), null === (n = o.tracker) || void 0 === n || n.receivedAdResponse(y.SUCCESS, o.getAdUnitCode(), o.getAdSlotTargeting())) : (null === (i = o.logger) || void 0 === i || i.debug("".concat(o.getFullName(), ": unable to load ad")), null === (r = o.tracker) || void 0 === r || r.receivedAdResponse(y.NOFILL, o.getAdUnitCode(), o.getAdSlotTargeting()), o.adPreloading && (o.adPreloading.resolve({
                                            success: !1,
                                            code: A.ON_LOAD,
                                            message: "".concat(o.getFullName(), ": unable to load ad")
                                        }), o.adPreloading = null)))
                                    })), window.googletag.pubads().disableInitialLoad(), window.googletag.pubads().enableSingleRequest(), window.googletag.enableServices(), o.config.pageUrl && h.setPrebidPageUrl(o.config.pageUrl)
                                })), [2]
                        }
                    }))
                }))
            }, e.prototype.reset = function() {
                t.prototype.reset.call(this), this.adSlot && window.googletag.destroySlots([this.adSlot]), this.adPreloading && (this.adPreloading.resolve({
                    success: !1,
                    code: A.ON_LOAD,
                    message: "".concat(this.getFullName(), ": unable to load ad")
                }), this.adPreloading = null)
            }, e.prototype.isReady = function() {
                return h.gptLoaded
            }, e.prototype.setTargeting = function(t) {
                var e, n, i;
                this.adSlot && ((null === (e = this.config) || void 0 === e ? void 0 : e.customTargeting) && this.addAdSlotTargeting(this.config.customTargeting), this.deviceId && this.addAdSlotTargeting(this.getDeviceIdTargeting()), this.ppid && (null === (i = null === (n = null === window || void 0 === window ? void 0 : window.googletag) || void 0 === n ? void 0 : n.pubads) || void 0 === i || i.call(n).setPublisherProvidedId(this.ppid)), t && this.addAdSlotTargeting(t))
            }, e.prototype.getAdSlotTargeting = function() {
                if (this.adSlot && this.adSlot.getTargetingMap()) {
                    var t = {},
                        e = this.adSlot.getTargetingMap();
                    for (var n in e)
                        if ({}.hasOwnProperty.call(e, n)) {
                            var i = e[n];
                            t[n] = Array.isArray(i) ? i.join() : i
                        }
                    return t
                }
                return {}
            }, e.prototype.addAdSlotTargeting = function(t) {
                if (t && "object" == typeof t && this.adSlot && this.adSlot.setTargeting)
                    for (var e in t) t.hasOwnProperty(e) && this.adSlot.setTargeting(e, t[e])
            }, e
        }(L),
        D = function(t) {
            function e(e) {
                var n = t.call(this, d.INTERSTITIAL, e) || this;
                return n.adShownPromise = null, n
            }
            return n(e, t), e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    var o = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, i)];
                            case 1:
                                if (r.sent(), this.clearStorage(), this.at = this.addDOMElements(), !this.at) throw this.isInitialized = !1, new Error("".concat(this.getFullName(), ": unable to add required dom elements"));
                                return window.googletag.cmd.push((function() {
                                    window.googletag.pubads().addEventListener("slotRenderEnded", (function(t) {
                                        o.adSlot === t.slot && (o.isAdAvailable = !t.isEmpty, o.isAdAvailable && o.adPreloading && (o.adPreloading.resolve({
                                            success: !0,
                                            code: b.DELIVERED
                                        }), o.adPreloading = null))
                                    }))
                                })), window.addEventListener("gpt-interstitial-ad-closed", (function() {
                                    var t, e;
                                    if (o.isAdAvailable = !1, null === (t = o.tracker) || void 0 === t || t.finishedAd(w.SUCCESS, o.getAdUnitCode(), o.getAdSlotTargeting()), o.adShownPromise) {
                                        var n = {
                                            success: !0,
                                            code: b.COMPLETED
                                        };
                                        o.adShownPromise.resolve(n), o.adShownPromise = null
                                    }
                                    null === (e = o.logger) || void 0 === e || e.debug("".concat(o.getFullName(), ": ad closed"))
                                })), h.addPrebidAdUnit(this.adUnit), [2]
                        }
                    }))
                }))
            }, e.prototype.preload = function() {
                var e, n;
                return o(this, void 0, void 0, (function() {
                    var i, o, s, a, d, u, c, p = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.preload.call(this)];
                            case 1:
                                return i = r.sent(), this.clearStorage(), i && i.success ? this.getUserP1Consent() && this.getVendorConsent(h.GOOGLE_VENDOR_ID) ? this.adPreloading ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already loading an ad")), [2, {
                                    success: !0,
                                    code: b.DELIVERED
                                }]) : (o = {
                                    aps: !1,
                                    prebid: !1
                                }, s = h.generateUUID(), a = function() {
                                    o.aps && o.prebid && d()
                                }, d = function() {
                                    window.googletag.cmd.push((function() {
                                        var t;
                                        window.googletag.pubads().setRequestNonPersonalizedAds(p.getUserP4Consent() ? 0 : 1), window.googletag.pubads().setPrivacySettings({
                                            limitedAds: !p.getUserP1Consent()
                                        });
                                        try {
                                            p.setTargeting({
                                                hb_aid: s
                                            }), window.googletag.pubads().refresh([p.adSlot])
                                        } catch (e) {
                                            p.isPreloadingAd = !1, p.isAdAvailable = !1, null === (t = p.logger) || void 0 === t || t.error(e), p.adPreloading && (p.adPreloading.resolve({
                                                success: !1,
                                                code: A.ON_LOAD,
                                                message: "".concat(p.getFullName(), ": unable to send request to ad server - ").concat(e)
                                            }), p.adPreloading = null)
                                        }
                                    }))
                                }, u = function() {
                                    if (!(p.adUnit && p.adUnit.bids && p.adUnit.bids.length && window.pbjs)) return o.prebid = !0, void a();
                                    window.pbjs.que.push((function() {
                                        var t = {
                                            auctionId: s,
                                            timeout: p.adUnit.timeout,
                                            adUnits: [p.adUnit],
                                            bidsBackHandler: function() {
                                                window.pbjs.initAdserverSet = !0, window.pbjs.setTargetingForGPTAsync(), o.prebid = !0, a()
                                            }
                                        };
                                        try {
                                            window.pbjs.requestBids(t)
                                        } catch (t) {
                                            o.prebid = !0, a()
                                        }
                                    }))
                                }, c = function() {
                                    if (!(p.adUnit && p.adUnit.uam && window.apstag)) return o.aps = !0, void a();
                                    var t = h.toUAMAdUnit(p.adUnit);
                                    t.slotID = p.adSlot.getSlotElementId(), window.apstag.fetchBids({
                                        slots: [t],
                                        timeout: p.adUnit.timeout
                                    }, (function() {
                                        window.googletag.cmd.push((function() {
                                            window.apstag.setDisplayBids(), o.aps = !0, a()
                                        }))
                                    }))
                                }, null === (n = this.tracker) || void 0 === n || n.requestingAd(this.getAdUnitCode(), {
                                    hb_aid: s
                                }), window.googletag.cmd.push((function() {
                                    var t;
                                    if (window.googletag.destroySlots([p.adSlot]), p.adSlot = window.googletag.defineOutOfPageSlot(p.getAdUnitCode(), window.googletag.enums.OutOfPageFormat.INTERSTITIAL), !p.adSlot) return null === (t = p.logger) || void 0 === t || t.debug("".concat(p.getFullName(), ": unable to create ad slot")), p.isPreloadingAd = !1, p.isAdAvailable = !1, void(p.adPreloading && (p.adPreloading.resolve({
                                        success: !1,
                                        code: A.ON_LOAD,
                                        message: "".concat(p.getFullName(), ": unable to create ad slot")
                                    }), p.adPreloading = null));
                                    p.adSlot.addService(window.googletag.pubads()), u(), c()
                                })), this.adPreloading = new l, [2, this.adPreloading.promise]) : [2, {
                                    success: !1,
                                    code: A.ON_SHOW,
                                    message: "missing required vendor consent"
                                }] : [2, i]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                return o(this, void 0, void 0, (function() {
                    var t;
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this.isAdAvailable ? [3, 2] : [4, this.preload()];
                            case 1:
                                return (t = e.sent()) && t.success && this.isAdAvailable ? [2, this.showAd()] : [2, t];
                            case 2:
                                return [2, this.showAd()]
                        }
                    }))
                }))
            }, e.prototype.reset = function() {
                if (t.prototype.reset.call(this), this.adShownPromise) {
                    var e = {
                        success: !0,
                        code: b.COMPLETED
                    };
                    this.adShownPromise.resolve(e), this.adShownPromise = null
                }
                this.adPreloading && (this.adPreloading.resolve({
                    success: !1,
                    code: A.ON_LOAD,
                    message: "".concat(this.getFullName(), ": unable to load ad")
                }), this.adPreloading = null)
            }, e.prototype.canPreload = function() {
                return !0
            }, e.prototype.showAd = function() {
                var e, n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.show.call(this)];
                            case 1:
                                return (i = o.sent()) && i.success ? this.at ? this.adShownPromise ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already showing ad")), [2, {
                                    success: !0,
                                    code: b.COMPLETED
                                }]) : (null === (n = this.tracker) || void 0 === n || n.willShowAd(!0, this.getAdUnitCode(), this.getAdSlotTargeting()), this.at.click(), this.adShownPromise = new l, [2, this.adShownPromise.promise]) : [2, {
                                    success: !1,
                                    code: A.ON_SHOW,
                                    message: "".concat(this.getFullName(), ": missing required dom elements")
                                }] : [2, i]
                        }
                    }))
                }))
            }, e.prototype.addDOMElements = function() {
                var t = this,
                    e = document.createElement("a");
                return e.id = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(), e.href = "#", e.setAttribute("data-google-interstitial", "true"), e.setAttribute("tabindex", "-1"), e.onclick = function() {
                    t.clearStorage()
                }, document.body.appendChild(e)
            }, e.prototype.clearStorage = function() {
                var t;
                try {
                    localStorage.removeItem("__lsv__")
                } catch (e) {
                    null === (t = this.logger) || void 0 === t || t.debug("".concat(this.getFullName(), ": unable to clear storage"))
                }
            }, e
        }(R),
        N = function(t) {
            function e(e) {
                var n = t.call(this, d.REWARD, e) || this;
                return n.rewardSlotEvent = null, n.skipped = !0, n.adShownPromise = null, n
            }
            return n(e, t), e.prototype.canPreload = function() {
                return !0
            }, e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    var o = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, i)];
                            case 1:
                                return r.sent(), window.googletag.cmd.push((function() {
                                    window.googletag.pubads().addEventListener("rewardedSlotReady", (function(t) {
                                        o.rewardSlotEvent = t, o.adPreloading && (o.adPreloading.resolve({
                                            success: !0,
                                            code: b.DELIVERED
                                        }), o.adPreloading = null)
                                    })), window.googletag.pubads().addEventListener("rewardedSlotGranted", (function() {
                                        o.skipped = !1
                                    })), window.googletag.pubads().addEventListener("rewardedSlotClosed", (function() {
                                        var t, e;
                                        if (o.isAdAvailable = !1, null === (t = o.logger) || void 0 === t || t.debug("".concat(o.getFullName(), ": ad closed, skipped? ").concat(o.skipped)), null === (e = o.tracker) || void 0 === e || e.finishedAd(o.skipped ? w.SKIPPED : w.SUCCESS, o.getAdUnitCode()), o.adShownPromise) {
                                            var n = {
                                                success: !0,
                                                code: o.skipped ? b.DELIVERED : b.COMPLETED
                                            };
                                            o.adShownPromise.resolve(n), o.adShownPromise = null
                                        }
                                        o.skipped = !0, o.rewardSlotEvent = null
                                    }))
                                })), [2]
                        }
                    }))
                }))
            }, e.prototype.preload = function() {
                var e;
                return o(this, void 0, void 0, (function() {
                    var n, i = this;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.preload.call(this)];
                            case 1:
                                return (n = o.sent()) && n.success ? this.adPreloading ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already loading an ad")), [2, {
                                    success: !0,
                                    code: b.DELIVERED
                                }]) : (this.rewardSlotEvent = null, this.skipped = !0, window.googletag.cmd.push((function() {
                                    var t, e;
                                    try {
                                        window.googletag.pubads().setRequestNonPersonalizedAds(i.getUserP4Consent() ? 0 : 1), window.googletag.pubads().setPrivacySettings({
                                            limitedAds: !i.getUserP1Consent()
                                        }), window.googletag.destroySlots([i.adSlot]), i.adSlot = window.googletag.defineOutOfPageSlot(i.getAdUnitCode(), window.googletag.enums.OutOfPageFormat.REWARDED), i.adSlot.addService(window.googletag.pubads()), i.setTargeting(), null === (t = i.tracker) || void 0 === t || t.requestingAd(i.getAdUnitCode()), window.googletag.pubads().refresh([i.adSlot])
                                    } catch (t) {
                                        i.reset(), null === (e = i.logger) || void 0 === e || e.error({
                                            success: !1,
                                            code: A.ON_LOAD,
                                            message: JSON.stringify(t)
                                        }), i.adPreloading && (i.adPreloading.resolve({
                                            success: !1,
                                            code: A.ON_LOAD,
                                            message: "".concat(i.getFullName(), ": unable to send request to ad server - ").concat(t)
                                        }), i.adPreloading = null)
                                    }
                                })), this.adPreloading = new l, [2, this.adPreloading.promise]) : [2, n]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                return o(this, void 0, void 0, (function() {
                    var t;
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this.isAdAvailable ? [3, 2] : [4, this.preload()];
                            case 1:
                                return (t = e.sent()) && t.success && this.isAdAvailable ? [2, this.showAd()] : [2, t];
                            case 2:
                                return [2, this.showAd()]
                        }
                    }))
                }))
            }, e.prototype.reset = function() {
                if (t.prototype.reset.call(this), this.adShownPromise) {
                    var e = {
                        success: !0,
                        code: this.skipped ? b.DELIVERED : b.COMPLETED
                    };
                    this.adShownPromise.resolve(e), this.adShownPromise = null
                }
                this.adPreloading && (this.adPreloading.resolve({
                    success: !1,
                    code: A.ON_LOAD,
                    message: "".concat(this.getFullName(), ": unable to load ad")
                }), this.adPreloading = null)
            }, e.prototype.showAd = function() {
                var e, n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.show.call(this)];
                            case 1:
                                return (i = o.sent()) && i.success ? this.adShownPromise ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already showing ad")), [2, {
                                    success: !0,
                                    code: b.COMPLETED
                                }]) : this.rewardSlotEvent ? (null === (n = this.tracker) || void 0 === n || n.willShowAd(!0, this.getAdUnitCode()), this.rewardSlotEvent.makeRewardedVisible(), this.adShownPromise = new l, [2, this.adShownPromise.promise]) : [2, {
                                    success: !1,
                                    code: A.ON_SHOW,
                                    message: "".concat(this.getFullName(), ": failed to render ad")
                                }] : [2, i]
                        }
                    }))
                }))
            }, e
        }(R),
        k = function() {
            function t(t) {
                this.wrapperElement = null, this.videoElement = null, this.adElement = null, this.playing = !1, this.videoPlayerConfig = null, this.onToggleCallbacks = [], this.toggleVideoElement = null, this.videoPlayerConfig = t, this.createHTMLElements()
            }
            return t.prototype.createHTMLElements = function() {
                var t = this;
                this.wrapperElement = h.stringToHTMLElement("<div></div>");
                var e = '<div><video id="' + this.videoPlayerConfig.id + '" width="' + this.getPlayerWidth() + 'px" height="' + this.getPlayerHeight() + 'px" playsinline></video></div>',
                    n = h.stringToHTMLElement(e);
                this.videoElement = n.firstChild, this.adElement = h.stringToHTMLElement("<div style='position: absolute; top:0; min-width: 100%; min-height: 100%;'></div>"), this.toggleVideoElement = h.stringToHTMLElement("<button title='Play/Pause' style='position: absolute;left: 20px;bottom: 20px;height: 40px;width: 100px;font-weight: bold;font-size: 25px; font-family: sans-serif !important; opacity: 0.5;background-color: #fff;border-radius: 5px;border: 1px transparent solid;color: #000;cursor: pointer;line-height: 0;'>II</button>"), this.toggleVideoElement.onclick = function() {
                    t.toggled()
                }, this.wrapperElement.appendChild(n), this.wrapperElement.appendChild(this.adElement), this.wrapperElement.appendChild(this.toggleVideoElement)
            }, t.prototype.toggled = function() {
                var t = this;
                this.playing ? this.toggleVideoElement.textContent = String.fromCharCode(9654) : this.toggleVideoElement.textContent = "II", this.onToggleCallbacks && this.onToggleCallbacks.length > 0 && this.onToggleCallbacks.forEach((function(e) {
                    try {
                        e(t.playing)
                    } catch (t) {
                        console.error(t)
                    }
                })), this.playing = !this.playing
            }, t.prototype.paused = function() {
                this.playing = !1, this.toggleVideoElement.textContent = String.fromCharCode(9654)
            }, t.prototype.resumed = function() {
                this.playing = !0, this.toggleVideoElement.textContent = "II"
            }, t.prototype.resize = function() {
                this.videoElement && (this.videoElement.setAttribute("width", this.getPlayerWidth() + "px"), this.videoElement.setAttribute("height", this.getPlayerHeight() + "px"))
            }, t.prototype.getVideoHTMLElement = function() {
                return this.videoElement
            }, t.prototype.getAdContainerHTMLElement = function() {
                return this.adElement
            }, t.prototype.getHTMLWrapper = function() {
                return this.wrapperElement
            }, t.prototype.isPlaying = function() {
                return this.playing
            }, t.prototype.getPlayerWidth = function() {
                return this.videoPlayerConfig.width || h.getBrowserWidth()
            }, t.prototype.getPlayerHeight = function() {
                return this.videoPlayerConfig.height || h.getBrowserHeight()
            }, t.prototype.onToggle = function(t) {
                this.onToggleCallbacks.push(t)
            }, t
        }(),
        O = function(t) {
            function e(e, n) {
                var i = t.call(this, e, I.VIDEO, n) || this;
                return i.adsManager = null, i.adsLoader = null, i.adContainer = null, i.skipped = !0, i.isIMAReady = !1, i.adShownPromise = null, i.adPreloading = null, i.videoPlayer = null, i
            }
            return n(e, t), e.prototype.init = function(n, i, s) {
                return o(this, void 0, void 0, (function() {
                    var o = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, n, i, s)];
                            case 1:
                                return r.sent(), h.onIMAReady().then((function() {
                                    o.isIMAReady = !0
                                })), this.videoPlayer = e.buildVideoPlayer(this.adUnit, d.INTERSTITIAL === this.getType() || d.REWARD === this.getType()), this.videoPlayer && (this.videoPlayer.onToggle((function(t) {
                                    o.adsManager && (t ? o.adsManager.pause() : o.adsManager.resume())
                                })), h.addPrebidAdUnit(this.adUnit), this.config.pageUrl && h.setPrebidPageUrl(this.config.pageUrl)), [2]
                        }
                    }))
                }))
            }, e.prototype.preload = function() {
                var e, n, s, a, d;
                return o(this, void 0, void 0, (function() {
                    var o, u, c, p, g, f, v, m, y, w, E = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.preload.call(this)];
                            case 1:
                                if ((o = r.sent()) && o.success) {
                                    if (!this.isIMAReady) return null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": unable to preload, ima sdk isn't ready yet")), this.isAdAvailable = !1, this.isPreloadingAd = !1, [2, {
                                        success: !1,
                                        code: A.ON_LOAD,
                                        message: "".concat(this.getFullName(), ": unable to preload, ima sdk isn't ready yet")
                                    }];
                                    if (!this.adsLoader && !this.initializeIMAComponents()) return null === (n = this.logger) || void 0 === n || n.debug("".concat(this.getFullName(), ": unable to initialize ima")), this.isAdAvailable = !1, this.isPreloadingAd = !1, [2, {
                                        success: !1,
                                        code: A.ON_LOAD,
                                        message: "".concat(this.getFullName(), ":unable to initialize ima")
                                    }];
                                    if (this.adPreloading) return null === (s = this.logger) || void 0 === s || s.debug("".concat(this.getFullName(), ": already loading an ad")), [2, {
                                        success: !0,
                                        code: b.DELIVERED
                                    }];
                                    u = this.adUnit, c = h.generateUUID(), p = this.config.customTargeting || {}, g = {
                                        aps: !1,
                                        apsVideoTargeting: null,
                                        prebid: !1
                                    }, f = function() {
                                        g.aps && g.prebid && v(m())
                                    }, v = function(t) {
                                        try {
                                            var e = new window.google.ima.AdsRequest;
                                            e.adTagUrl = t, E.config.pageUrl && (e.pageUrl = E.config.pageUrl), e.linearAdSlotWidth = E.adUnit.mediaTypes.video.playerSize[0], e.linearAdSlotHeight = E.adUnit.mediaTypes.video.playerSize[1], E.adsLoader.requestAds(e)
                                        } catch (t) {
                                            E.isAdAvailable = !1, E.isPreloadingAd = !1, E.logger.error("".concat(E.getFullName(), ": unable to send request to ad server - ").concat(t)), E.adPreloading && (E.adPreloading.resolve({
                                                success: !1,
                                                code: A.ON_LOAD,
                                                message: "".concat(E.getFullName(), ": unable to send request to ad server - ").concat(t)
                                            }), E.adPreloading = null)
                                        }
                                    }, m = function() {
                                        var t, e, n, o, r = g.apsVideoTargeting ? h.parseParameters(decodeURIComponent(g.apsVideoTargeting)) : {},
                                            s = {
                                                iu: E.getAdUnitCode(),
                                                cust_params: i(i(i({}, p), {
                                                    hb_aid: c
                                                }), r),
                                                output: "vast",
                                                vpmute: E.getVolume() > 0 ? 0 : 1
                                            };
                                        (null === (e = null === (t = E.adUnit.mediaTypes) || void 0 === t ? void 0 : t.video) || void 0 === e ? void 0 : e.maxduration) && (s.max_ad_duration = 1e3 * E.adUnit.mediaTypes.video.maxduration), (null === (o = null === (n = E.adUnit.mediaTypes) || void 0 === n ? void 0 : n.video) || void 0 === o ? void 0 : o.minduration) && (s.min_ad_duration = 1e3 * E.adUnit.mediaTypes.video.minduration), E.adUnit.mediaTypes.video.startdelay || (E.adUnit.mediaTypes.video.startdelay = 0), E.config.pageUrl && (s.url = E.config.pageUrl, s.description_url = E.config.pageUrl);
                                        var a = window.pbjs.adServers.dfp.buildVideoUrl({
                                            adUnit: u,
                                            params: s
                                        });
                                        return E.getUserP1Consent() || (a += "&ltd=1"), E.getUserP4Consent() || (a += "&npa=1"), E.getDeviceIdTargeting() && (a += "&" + h.toUrlQueryParameters(E.getDeviceIdTargeting())), E.ppid && (a += "&ppid=".concat(E.ppid)), a
                                    }, y = function() {
                                        if (!(E.adUnit && E.adUnit.bids && E.adUnit.bids.length && window.pbjs)) return g.prebid = !0, void f();
                                        window.pbjs.que.push((function() {
                                            var t = {
                                                auctionId: c,
                                                adUnits: [u],
                                                timeout: E.adUnit.timeout,
                                                bidsBackHandler: function() {
                                                    window.pbjs.initAdserverSet = !0, g.prebid = !0, f()
                                                }
                                            };
                                            try {
                                                window.pbjs.requestBids(t)
                                            } catch (t) {
                                                g.prebid = !0, f()
                                            }
                                        }))
                                    }, w = function() {
                                        if (!(E.adUnit && E.adUnit.uam && window.apstag)) return g.aps = !0, void f();
                                        var t = h.adUnitPath2NetworkAndCode(E.getAdUnitCode());
                                        if (!t) return g.aps = !0, void f();
                                        var e, n = {
                                            slotID: (e = t.code, e.replaceAll("_", "").replaceAll("-", "_")),
                                            slotName: t.code,
                                            mediaType: "video"
                                        };
                                        window.apstag.fetchBids({
                                            slots: [n],
                                            timeout: E.adUnit.timeout
                                        }, (function(t) {
                                            g.aps = !0, t && t[0] && (g.apsVideoTargeting = t[0].encodedQsParams), f()
                                        }))
                                    };
                                    try {
                                        null === (a = this.tracker) || void 0 === a || a.requestingAd(this.getAdUnitCode(), {
                                            hb_aid: c
                                        }), y(), w()
                                    } catch (t) {
                                        return null === (d = this.logger) || void 0 === d || d.error(t), [2]
                                    }
                                    return this.adPreloading = new l, [2, this.adPreloading.promise]
                                }
                                return [2, o]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                var e, n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.show.call(this)];
                            case 1:
                                return (i = o.sent()) && i.success ? this.adShownPromise ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already showing ad")), [2, {
                                    success: !0,
                                    code: b.COMPLETED
                                }]) : (null === (n = this.tracker) || void 0 === n || n.willShowAd(!0, this.getAdUnitCode(), this.getAdSlotParams()), this.adsManager.setVolume(this.getVolume()), this.adsManager.start(), this.adShownPromise = new l, [2, this.adShownPromise.promise]) : [2, i]
                        }
                    }))
                }))
            }, e.prototype.reset = function() {
                if (t.prototype.reset.call(this), this.adsManager && this.adsManager.destroy(), this.videoPlayer && this.videoPlayer.resize(), this.adShownPromise) {
                    var e = {
                        success: !0,
                        code: this.skipped ? b.DELIVERED : b.COMPLETED
                    };
                    this.adShownPromise.resolve(e), this.adShownPromise = null
                }
                if (this.adPreloading) {
                    e = {
                        success: !1,
                        code: A.ON_LOAD,
                        message: "".concat(this.getFullName(), ": unable to preload ad")
                    };
                    this.adPreloading.resolve(e), this.adPreloading = null
                }
            }, e.prototype.canPreload = function() {
                return !0
            }, e.prototype.isReady = function() {
                return h.isIMAPresent()
            }, e.prototype.isShowingAd = function() {
                return !!this.adShownPromise
            }, e.prototype.initializeIMAComponents = function() {
                var t, e, n = this;
                if (!h.isIMAPresent()) return null === (t = this.logger) || void 0 === t || t.debug("".concat(this.getFullName(), ": ima sdk not present")), !1;
                try {
                    return window.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0), this.adContainer = new window.google.ima.AdDisplayContainer(this.videoPlayer.getAdContainerHTMLElement(), this.videoPlayer.getVideoHTMLElement()), this.adContainer.initialize(), this.adsLoader = new window.google.ima.AdsLoader(this.adContainer), this.adsLoader.getSettings().setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE), this.adsLoader.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, (function(t) {
                        var e = new window.google.ima.AdsRenderingSettings;
                        e.restoreCustomPlaybackStateOnAdBreakComplete = !0, n.adsManager = t.getAdsManager(n.videoPlayer.getVideoHTMLElement(), e), n.adsManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR, n.handleIMAError.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED, n.handleIMAEvent.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.LOADED, n.handleIMAEvent.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.COMPLETE, n.handleIMAEvent.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.SKIPPED, n.handleIMAEvent.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.STARTED, n.handleIMAEvent.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.CLICK, n.handleIMAEvent.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.PAUSED, n.handleIMAEvent.bind(n)), n.adsManager.addEventListener(window.google.ima.AdEvent.Type.RESUMED, n.handleIMAEvent.bind(n));
                        try {
                            n.adsManager.init(n.videoPlayer.getPlayerWidth(), n.videoPlayer.getPlayerHeight(), window.google.ima.ViewMode.FULLSCREEN)
                        } catch (t) {
                            n.handleIMAError(t)
                        }
                    }), !1), this.adsLoader.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR, this.handleIMAError.bind(this), !1), !0
                } catch (t) {
                    null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": unable to initialize ima components - ").concat(t))
                }
                return !1
            }, e.prototype.handleIMAEvent = function(t) {
                var e, n;
                switch (t.type) {
                    case window.google.ima.AdEvent.Type.LOADED:
                        null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": ad filled")), this.isAdAvailable = !0, this.isPreloadingAd = !1, null === (n = this.tracker) || void 0 === n || n.receivedAdResponse(y.SUCCESS, this.getAdUnitCode(), this.getAdSlotParams()), this.adsLoader.__cad = t.getAd(), this.adPreloading && (this.adPreloading.resolve({
                            success: !0,
                            code: b.DELIVERED
                        }), this.adPreloading = null);
                        break;
                    case window.google.ima.AdEvent.Type.SKIPPED:
                        this.skipped = !0, this.adClosed();
                        break;
                    case window.google.ima.AdEvent.Type.COMPLETE:
                        this.skipped = !1, this.adClosed();
                        break;
                    case window.google.ima.AdEvent.Type.STARTED:
                        this.skipped = !0, this.videoPlayer.resumed();
                        break;
                    case window.google.ima.AdEvent.Type.RESUMED:
                        this.videoPlayer.resumed();
                        break;
                    case window.google.ima.AdEvent.Type.PAUSED:
                        this.videoPlayer.paused();
                        break;
                    case window.google.ima.AdEvent.Type.CLICK:
                        this.adsManager && this.videoPlayer && this.videoPlayer.isPlaying() && (this.videoPlayer.paused(), this.adsManager.pause())
                }
            }, e.prototype.handleIMAError = function(t) {
                var e, n;
                if (t && t.getError && t.getError().getErrorCode && 1009 === t.getError().getErrorCode()) return null === (e = this.tracker) || void 0 === e || e.receivedAdResponse(y.NOFILL, this.getAdUnitCode(), this.getAdSlotParams()), this.skipped = !0, this.isAdAvailable = !1, this.isPreloadingAd = !1, void(this.adPreloading && (this.adPreloading.resolve({
                    success: !1,
                    code: A.ON_LOAD,
                    message: "".concat(this.getFullName(), ": unable to preload ad")
                }), this.adPreloading = null));
                if (this.adShownPromise) {
                    var i = {
                        success: !1,
                        code: A.ON_SHOW,
                        message: "".concat(t && t.getError && t.getError().getMessage ? t.getError().getMessage() : "")
                    };
                    this.adShownPromise.resolve(i), this.adShownPromise = null
                }
                this.adPreloading && (this.adPreloading.resolve({
                    success: !1,
                    code: A.ON_LOAD,
                    message: "".concat(this.getFullName(), ": unable to preload ad")
                }), this.adPreloading = null), null === (n = this.logger) || void 0 === n || n.error("".concat(this.getFullName(), ": ").concat(t && t.getError && t.getError().getMessage ? t.getError().getMessage() : "unknown error")), this.reset()
            }, e.prototype.adClosed = function() {
                var t, e;
                if (null === (t = this.logger) || void 0 === t || t.debug("".concat(this.getFullName(), ": ad closed, skipped? ").concat(this.skipped)), null === (e = this.tracker) || void 0 === e || e.finishedAd(this.skipped ? w.SKIPPED : w.SUCCESS, this.getAdUnitCode(), this.getAdSlotParams()), this.isAdAvailable = !1, this.videoPlayer.paused(), this.adShownPromise) {
                    var n = {
                        success: !0,
                        code: this.skipped ? b.DELIVERED : b.COMPLETED
                    };
                    this.adShownPromise.resolve(n), this.adShownPromise = null
                }
            }, e.prototype.getAdSlotParams = function() {
                return this.adsLoader && this.adsLoader.params ? this.adsLoader.params : {}
            }, e.buildVideoPlayer = function(t, e) {
                var n = {
                    id: h.isFunction(t.code) ? t.code() : t.code
                };
                return e || (n.width = t.mediaTypes.video.playerSize[0], n.height = t.mediaTypes.video.playerSize[1]), new k(n)
            }, e
        }(L),
        _ = function() {
            function t(t) {
                this.contentElement = null, this.modalElement = null, this.createHTMLElements(t)
            }
            return t.prototype.createHTMLElements = function(t) {
                var e = document.createElement("div");
                e.style.cssText = "visibility: hidden; position: fixed;top: 0;left: 0;height: 100%;width: 100%;z-index: 9223372036854775807;background-color: rgba(0,0,0,0.85);";
                var n = document.createElement("div");
                e.appendChild(n), n.style.cssText = "display: flex; align-items: center; justify-content: center; height: 100%; width: 100%; margin: 0; padding: 0; outline: none;";
                var i = document.createElement("div");
                if (n.appendChild(i), i.style.cssText = "position: relative; margin: 0; outline: none; background-color: #fff; box-shadow: 0px 8px 12px rgb(60 64 67 / 15%), 0px 4px 4px rgb(60 64 67 / 30%); border-radius: 5px;", t) {
                    var o = document.createElement("div");
                    i.appendChild(o), o.style.cssText = "width: 100%; display: table; height: 24px; background-color: #fff; margin: 0; padding: 0; outline: none;border-radius: 5px 5px 0px 0px;";
                    var r = document.createElement("div");
                    o.appendChild(r), r.style.cssText = "float: left; display: table; transition: opacity 1s, background .75s; -webkit-transition: opacity 1s, background .75s; -moz-transition: opacity 1s, background .75s; -o-transition: opacity 1s, background .75s; background: transparent; color: #fff; padding-bottom: 10px; padding-top: 10px;", r.innerHTML = "<div style=\"font-size: 14px; font-weight: 700; font-family: 'Roboto', arial, sans-serif; color: #202124; position: relative; height: 25px; padding: 2px 16px 0; float: left; display: table-cell; vertical-align: middle; text-align: center; line-height: 25px;\"> Ad </div>";
                    var s = document.createElement("div");
                    o.appendChild(s), s.style.cssText = "color: black; opacity: 0.95; padding: 12px 20px 0; float: right; display: table-cell;vertical-align: middle;", s.setAttribute("aria-label", "Close"), s.setAttribute("tabindex", "1"), s.innerHTML = '<div style="cursor: pointer; display: table-cell;vertical-align: middle;"><svg viewBox="0 0 48 48" fill="#5F6368" style="height: 1.5em; width: 1.5em; margin-left: -0.5em; margin-right: -0.5em; vertical-align: middle; padding-bottom: 1px;"><path d="M38 12.83L35.17 10 24 21.17 12.83 10 10 12.83 21.17 24 10 35.17 12.83 38 24 26.83 35.17 38 38 35.17 26.83 24z"></path><path d="M0 0h48v48H0z" fill="none"></path></svg></div>', s.onclick = this.close.bind(this)
                }
                var a = document.createElement("div");
                i.appendChild(a), a.style.cssText = "transition: opacity 1s; -webkit-transition: opacity 1s; position: relative; margin: 0; padding: 0; outline: none; font-size: 0", this.contentElement = a, this.modalElement = e, document.body.appendChild(this.modalElement)
            }, t.prototype.close = function() {
                this.modalElement.style.visibility = "hidden"
            }, t.prototype.show = function() {
                this.modalElement.style.visibility = "visible"
            }, t.prototype.addContent = function(t) {
                var e = document.createElement("div");
                e.appendChild(t);
                var n = e.firstChild;
                return this.contentElement.appendChild(n), n
            }, t.prototype.deleteCreativeContent = function() {
                this.contentElement.innerHTML = ""
            }, t
        }(),
        M = function(t) {
            function e(e) {
                var n = t.call(this, d.INTERSTITIAL, e) || this;
                return n.modal = null, n
            }
            return n(e, t), e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, i)];
                            case 1:
                                return o.sent(), this.modal = new _(!1), this.modal.addContent(this.videoPlayer.getHTMLWrapper()), [2]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                return o(this, void 0, void 0, (function() {
                    var t;
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this.isAdAvailable ? [3, 2] : [4, this.preload()];
                            case 1:
                                return (t = e.sent()).success && this.isAdAvailable ? [2, this.showAd()] : [2, t];
                            case 2:
                                return [2, this.showAd()]
                        }
                    }))
                }))
            }, e.prototype.showAd = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                this.isAdAvailable && !this.isShowingAd() && this.modal.show(), e.label = 1;
                            case 1:
                                return e.trys.push([1, , 3, 4]), [4, t.prototype.show.call(this)];
                            case 2:
                                return [2, e.sent()];
                            case 3:
                                return this.isShowingAd() || this.modal.close(), [7];
                            case 4:
                                return [2]
                        }
                    }))
                }))
            }, e.prototype.reset = function() {
                t.prototype.reset.call(this), this.modal.close()
            }, e
        }(O),
        F = function(t) {
            function e(e) {
                var n = t.call(this, d.REWARD, e) || this;
                return n.modal = null, n
            }
            return n(e, t), e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, i)];
                            case 1:
                                return o.sent(), this.modal = new _(!1), this.modal.addContent(this.videoPlayer.getHTMLWrapper()), [2]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                return o(this, void 0, void 0, (function() {
                    var t;
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this.isAdAvailable ? [3, 2] : [4, this.preload()];
                            case 1:
                                return (t = e.sent()).success && this.isAdAvailable ? [2, this.showAd()] : [2, t];
                            case 2:
                                return [2, this.showAd()]
                        }
                    }))
                }))
            }, e.prototype.showAd = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                this.isAdAvailable && !this.isShowingAd() && this.modal.show(), e.label = 1;
                            case 1:
                                return e.trys.push([1, , 3, 4]), [4, t.prototype.show.call(this)];
                            case 2:
                                return [2, e.sent()];
                            case 3:
                                return this.isShowingAd() || this.modal.close(), [7];
                            case 4:
                                return [2]
                        }
                    }))
                }))
            }, e.prototype.reset = function() {
                t.prototype.reset.call(this), this.modal.close()
            }, e
        }(O),
        x = function(t) {
            function e(e) {
                var n = t.call(this, d.BANNER, I.DISPLAY, e) || this;
                return n.banners = [], n
            }
            return n(e, t), e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    var o, s = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, i)];
                            case 1:
                                return r.sent(), this.adUnits ? (o = [], this.adUnits.forEach((function(t) {
                                    var n = JSON.parse(JSON.stringify(e));
                                    n.config.adUnit = t, n.config.adUnits = null;
                                    var i = new V(h.isTabVisible, s.logger);
                                    o.push(i.init(n, s.controls, s.tracker).then((function() {
                                        s.banners.push(i)
                                    }), (function(t) {
                                        var e;
                                        null === (e = s.logger) || void 0 === e || e.error(t)
                                    })))
                                })), [4, Promise.allSettled(o).then((function() {
                                    return s.isAdAvailable = !0
                                }))]) : [3, 3];
                            case 2:
                                r.sent(), this.scheduledRefresh(), r.label = 3;
                            case 3:
                                return [2]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                return o(this, void 0, void 0, (function() {
                    var e, n, i, o;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.show.call(this)];
                            case 1:
                                if (!(e = r.sent()).success || !this.banners) return [3, 5];
                                r.label = 2;
                            case 2:
                                return r.trys.push([2, 4, , 5]), n = this.banners.filter((function(t) {
                                    return t.isVisible() && t.isRefreshable()
                                })), i = n.map((function(t) {
                                    return t.show()
                                })), this.auction(n), [4, Promise.all(i)];
                            case 3:
                                return r.sent(), [3, 5];
                            case 4:
                                return o = r.sent(), [2, {
                                    success: !1,
                                    code: A.ON_SHOW,
                                    message: o.message
                                }];
                            case 5:
                                return [2, e]
                        }
                    }))
                }))
            }, e.prototype.auction = function(t) {
                var e, n, i = this;
                if (t && !(t.length < 1)) {
                    var o = {
                            aps: !1,
                            prebid: !1
                        },
                        r = Math.max.apply(Math, t.map((function(t) {
                            return t.getAdUnit().timeout
                        }))),
                        s = h.generateUUID(),
                        a = function() {
                            o.aps && o.prebid && d()
                        },
                        d = function() {
                            window.googletag.cmd.push((function() {
                                var e;
                                window.googletag.pubads().setRequestNonPersonalizedAds(i.getUserP4Consent() ? 0 : 1), window.googletag.pubads().setPrivacySettings({
                                    limitedAds: !i.getUserP1Consent()
                                }), t.forEach((function(t) {
                                    return t.setTargeting({
                                        hb_aid: s
                                    })
                                }));
                                var n = t.map((function(t) {
                                    return t.getAdSlot()
                                })).filter((function(t) {
                                    return t
                                }));
                                try {
                                    window.googletag.pubads().refresh(n)
                                } catch (n) {
                                    return t.forEach((function(t) {
                                        return t.reset()
                                    })), void(null === (e = i.logger) || void 0 === e || e.error(n))
                                }
                            }))
                        };
                    try {
                        null === (e = this.tracker) || void 0 === e || e.requestingAd(this.getFullName(), {
                                hb_aid: s
                            }),
                            function() {
                                var e = t.map((function(t) {
                                    return t.getAdUnit()
                                })).filter((function(t) {
                                    return t && t.bids && t.bids.length
                                }));
                                if (!(e && e.length && window.pbjs)) return o.prebid = !0, void a();
                                window.pbjs.que.push((function() {
                                    var t = {
                                        auctionId: s,
                                        adUnits: e,
                                        timeout: r,
                                        bidsBackHandler: function() {
                                            window.googletag.cmd.push((function() {
                                                window.pbjs.initAdserverSet = !0, o.prebid = !0, window.pbjs.setTargetingForGPTAsync(), a()
                                            }))
                                        }
                                    };
                                    try {
                                        window.pbjs.requestBids(t)
                                    } catch (t) {
                                        o.prebid = !0, a()
                                    }
                                }))
                            }(),
                            function() {
                                var e = t.map((function(t) {
                                    return t.getAdUnit()
                                })).filter((function(t) {
                                    return t && t.uam
                                })).map((function(t) {
                                    return h.toUAMAdUnit(t)
                                }));
                                if (!(e && e.length && window.apstag)) return o.aps = !0, void a();
                                window.apstag.fetchBids({
                                    slots: e,
                                    timeout: r
                                }, (function() {
                                    window.googletag.cmd.push((function() {
                                        window.apstag.setDisplayBids(), o.aps = !0, a()
                                    }))
                                }))
                            }()
                    } catch (t) {
                        return void(null === (n = this.logger) || void 0 === n || n.error(t))
                    }
                }
            }, e.prototype.scheduledRefresh = function() {
                var t = this;
                setTimeout((function() {
                    return o(t, void 0, void 0, (function() {
                        var t = this;
                        return r(this, (function(e) {
                            return window.pbjs.que.push((function() {
                                window.googletag.cmd.push((function() {
                                    t.show().finally((function() {
                                        return t.scheduledRefresh()
                                    }))
                                }))
                            })), [2]
                        }))
                    }))
                }), 200)
            }, e.prototype.canPreload = function() {
                return !1
            }, e.prototype.reset = function() {}, e.prototype.isReady = function() {
                return !0
            }, e
        }(L),
        V = function(t) {
            function e(e, n) {
                var i = t.call(this, d.BANNER, n) || this;
                return i.adShownPromise = null, i.refreshInterval = 31e3, i.lastRefreshed = null, i.impressionViewed = !1, i.isTabVisible = e, i
            }
            return n(e, t), e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    var o = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, i)];
                            case 1:
                                return r.sent(), this.adUnit.refresh && (this.refreshInterval = this.adUnit.refresh), window.googletag.cmd.push((function() {
                                    var t, e;
                                    if (window.googletag.pubads().addEventListener("slotRenderEnded", (function(t) {
                                            var e;
                                            if (o.adSlot === t.slot) {
                                                if (o.adShownPromise) {
                                                    var n = {
                                                        success: !0,
                                                        code: b.COMPLETED
                                                    };
                                                    o.adShownPromise.resolve(n), o.adShownPromise = null, o.impressionViewed = !!t.isEmpty
                                                }
                                                null === (e = o.tracker) || void 0 === e || e.finishedAd(t.isEmpty ? w.NOFILL : w.SUCCESS, o.getAdUnitCode(), o.getAdSlotTargeting())
                                            }
                                        })), window.googletag.pubads().addEventListener("impressionViewable", (function(t) {
                                            o.adSlot === t.slot && (o.impressionViewed = !0)
                                        })), o.adSlot = window.googletag.defineSlot(o.getAdUnitCode(), null === (e = null === (t = o.adUnit.mediaTypes) || void 0 === t ? void 0 : t.banner) || void 0 === e ? void 0 : e.sizes, o.getAdUnitCode()), !o.adSlot) throw o.isInitialized = !1, new Error("unable to create banner ad slot");
                                    o.adSlot.addService(window.googletag.pubads()), h.addPrebidAdUnit(o.adUnit)
                                })), [2]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                var e, n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return this.isAdAvailable = !0, [4, t.prototype.show.call(this)];
                            case 1:
                                return (i = o.sent()) && i.success ? this.adShownPromise ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already fetching ad")), [2, {
                                    success: !1,
                                    code: A.ON_SHOW,
                                    message: "".concat(this.getFullName(), ": already fetching ad")
                                }]) : (null === (n = this.tracker) || void 0 === n || n.willShowAd(!0, this.getAdUnitCode(), this.getAdSlotTargeting()), this.lastRefreshed = new Date, this.adShownPromise = new l, [2, this.adShownPromise.promise]) : [2, i]
                        }
                    }))
                }))
            }, e.prototype.reset = function() {
                if (this.adShownPromise) {
                    var t = {
                        success: !0,
                        code: b.COMPLETED
                    };
                    this.adShownPromise.resolve(t), this.adShownPromise = null
                }
            }, e.prototype.canPreload = function() {
                return !1
            }, e.prototype.getAdSlotHTMLElement = function() {
                var t;
                if (this.getAdUnitCode()) try {
                    return null === (t = null === window || void 0 === window ? void 0 : window.document) || void 0 === t ? void 0 : t.getElementById(this.getAdUnitCode())
                } catch (t) {
                    return null
                }
            }, e.prototype.getAdUnit = function() {
                return this.adUnit
            }, e.prototype.getAdSlot = function() {
                return this.adSlot
            }, e.prototype.isVisible = function() {
                return this.adSlot && h.isHTMLElementVisible(this.getAdSlotHTMLElement())
            }, e.prototype.isRefreshable = function() {
                return null == this.lastRefreshed || (new Date).getTime() - this.lastRefreshed.getTime() > this.refreshInterval && this.impressionViewed && this.isTabVisible()
            }, e
        }(R),
        j = function(t) {
            function e(e, n) {
                var i = t.call(this, null != n ? n : d.REWARD, I.SURVEY, e) || this;
                return i.skipped = !0, i.adShownPromise = null, i.adPreloading = null, i.eventFields = null, i
            }
            return n(e, t), e.prototype.init = function(e, n, s) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.init.call(this, e, n, s)];
                            case 1:
                                return o.sent(), window.pollfishConfig = i(i({}, window.pollfishConfig || {}), {
                                    ready: function() {},
                                    surveyAvailable: this.onSurveyAvailable.bind(this),
                                    surveyNotAvailable: this.onSurveyNotAvailable.bind(this),
                                    surveyCompletedCallback: this.onSurveyCompleted.bind(this),
                                    userNotEligibleCallback: this.onUserDisqualified.bind(this),
                                    closeAndNoShowCallback: this.onSurveyCloseAndNoShow.bind(this),
                                    closeCallback: this.onSurveyClose.bind(this)
                                }), h.pollfishLoaded && !this.isAdAvailable && this.preload(), [2]
                        }
                    }))
                }))
            }, e.prototype.isReady = function() {
                return h.pollfishLoaded
            }, e.prototype.canPreload = function() {
                return !0
            }, e.prototype.reset = function() {
                if (t.prototype.reset.call(this), this.adPreloading && (this.adPreloading.resolve({
                        success: !1,
                        code: A.ON_LOAD,
                        message: "".concat(this.getFullName(), ": unable to load ad")
                    }), this.adPreloading = null), this.adShownPromise) {
                    var e = {
                        success: !0,
                        code: this.skipped ? b.DELIVERED : b.COMPLETED
                    };
                    window.Pollfish.hide(), this.adShownPromise.resolve(e), this.adShownPromise = null
                }
            }, e.prototype.preload = function() {
                var e, n, i;
                return o(this, void 0, void 0, (function() {
                    var o;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, t.prototype.preload.call(this)];
                            case 1:
                                return (o = r.sent()) && o.success ? (this.adPreloading && (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already loading an ad")), this.adPreloading.promise), this.skipped = !0, null === (n = this.tracker) || void 0 === n || n.requestingAd(this.getAdUnitCode()), null === (i = window.Pollfish) || void 0 === i || i.restart(window.pollfishConfig), this.adPreloading = new l, [2, this.adPreloading.promise]) : [2, o]
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    var e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.isAdAvailable || !(null === (t = this.config) || void 0 === t ? void 0 : t.blocking) ? [3, 2] : [4, this.preload()];
                            case 1:
                                return (e = n.sent()) && e.success && this.isAdAvailable ? [2, this.showAd()] : [2, e];
                            case 2:
                                return [2, this.showAd()]
                        }
                    }))
                }))
            }, e.prototype.showAd = function() {
                var e, n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, t.prototype.show.call(this)];
                            case 1:
                                return (i = o.sent()) && i.success ? this.adShownPromise ? (null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": already showing survey")), [2, this.adShownPromise.promise]) : this.isAdAvailable ? (h.overridePollfishContainerZIndex(2147483647), null === (n = this.tracker) || void 0 === n || n.willShowAd(!0, this.getAdUnitCode()), window.Pollfish.showFullSurvey(), this.adShownPromise = new l, [2, this.adShownPromise.promise]) : [2, {
                                    success: !1,
                                    code: A.ON_SHOW,
                                    message: "".concat(this.getFullName(), ": failed to render survey")
                                }] : (i && !i.success && !this.isAdAvailable && this.isInitialized && this.preload(), [2, i])
                        }
                    }))
                }))
            }, e.prototype.onSurveyAvailable = function(t) {
                var e, n;
                this.isAdAvailable = !0, this.isPreloadingAd = !1, this.adPreloading && (this.adPreloading.resolve({
                    success: !0,
                    code: b.DELIVERED
                }), this.adPreloading = null), null === (e = this.logger) || void 0 === e || e.debug("".concat(this.getFullName(), ": ad filled")), this.eventFields = {
                    cpm: 10 * t.revenue,
                    duration: t.survey_loi
                }, null === (n = this.tracker) || void 0 === n || n.receivedAdResponse(y.SUCCESS, this.getAdUnitCode(), this.eventFields)
            }, e.prototype.onSurveyNotAvailable = function() {
                var t, e;
                this.isAdAvailable = !1, this.isPreloadingAd = !1, this.eventFields = null, this.adPreloading && (this.adPreloading.resolve({
                    success: !1,
                    code: A.ON_LOAD,
                    message: "".concat(this.getFullName(), ": unable to load ad")
                }), this.adPreloading = null), null === (t = this.logger) || void 0 === t || t.debug("".concat(this.getFullName(), ": unable to load ad")), null === (e = this.tracker) || void 0 === e || e.receivedAdResponse(y.NOFILL, this.getAdUnitCode())
            }, e.prototype.onSurveyCompleted = function() {
                this.skipped = !1, this.isAdAvailable = !1
            }, e.prototype.onUserDisqualified = function() {
                this.skipped = !0, this.isAdAvailable = !1
            }, e.prototype.onSurveyCloseAndNoShow = function() {
                this.skipped = !0, this.onSurveyClose()
            }, e.prototype.onSurveyClose = function() {
                var t, e;
                if (null === (t = this.logger) || void 0 === t || t.debug("".concat(this.getFullName(), ": survey closed, skipped? ").concat(this.skipped)), null === (e = this.tracker) || void 0 === e || e.finishedAd(this.skipped ? w.SKIPPED : w.SUCCESS, this.getAdUnitCode(), this.eventFields), this.skipped || (this.eventFields = null), this.adShownPromise) {
                    var n = {
                        success: !0,
                        code: this.skipped ? b.DELIVERED : b.COMPLETED
                    };
                    this.adShownPromise.resolve(n), this.adShownPromise = null
                }
            }, e
        }(L),
        z = function(t) {
            function e(e) {
                return t.call(this, e, d.SURVEY) || this
            }
            return n(e, t), e
        }(j),
        H = function() {
            function t() {
                this.bootstrapMapper = {
                    "fran#display#interstitial": {
                        f: t.bootstrapDisplayInterstitial,
                        Type: D
                    },
                    "fran#display#reward": {
                        f: t.bootstrapDisplayReward,
                        Type: N
                    },
                    "fran#display#banner": {
                        f: t.bootstrapDisplayBanner,
                        Type: x
                    },
                    "fran#video#interstitial": {
                        f: t.bootstrapVideoAdProvider,
                        Type: M
                    },
                    "fran#video#reward": {
                        f: t.bootstrapVideoAdProvider,
                        Type: F
                    },
                    "fran#survey#reward": {
                        f: t.bootstrapSurveyAdProvider,
                        Type: j
                    },
                    "fran#survey#survey": {
                        f: t.bootstrapSurveyAdProvider,
                        Type: z
                    }
                }
            }
            return t.prototype.bootstrap = function(t, e) {
                var n = this;
                t = t || {};
                var i = [];
                return e.forEach((function(e) {
                    e in n.bootstrapMapper && (i.push(new n.bootstrapMapper[e].Type), n.bootstrapMapper[e].f(t))
                })), i
            }, t.bootstrapDisplayInterstitial = function(t) {
                h.loadGPT(t.gpt), h.loadApsTag(t.uam), h.loadPrebid(t.prebid), h.initializePrebid(t.prebid)
            }, t.bootstrapDisplayReward = function(t) {
                h.loadGPT(t.gpt)
            }, t.bootstrapDisplayBanner = function(t) {
                h.loadGPT(t.gpt), h.loadApsTag(t.uam), h.loadPrebid(t.prebid), h.initializePrebid(t.prebid)
            }, t.bootstrapVideoAdProvider = function(t) {
                h.loadIMA(t.ima), h.loadApsTag(t.uam), h.loadPrebid(t.prebid), h.initializePrebid(t.prebid)
            }, t.bootstrapSurveyAdProvider = function(t) {
                h.loadPollfish(t.pollfish)
            }, t
        }(),
        W = function() {
            function t() {}
            return t.prototype.ensureInit = function(t) {
                var e = this;
                if (!this.adProviders)
                    if (this.isFranConfigured(t)) {
                        var n = t.vendors.fran,
                            i = t.providers.map((function(t) {
                                return e.expandProviderAdUnitCode(t.config), t.name + "#" + t.type
                            })),
                            o = new H;
                        this.adProviders = o.bootstrap(n, i)
                    } else this.adProviders = []
            }, t.prototype.getProviders = function(t) {
                return this.ensureInit(t), this.adProviders
            }, t.prototype.setDeviceId = function(t) {
                var e;
                null === (e = this.adProviders) || void 0 === e || e.forEach((function(e) {
                    return e.setDeviceId(t)
                }))
            }, t.prototype.setVolume = function(t) {
                var e;
                null === (e = this.adProviders) || void 0 === e || e.forEach((function(e) {
                    return e.setVolume(t)
                }))
            }, t.prototype.setUserP1Consent = function(t) {
                var e;
                null === (e = this.adProviders) || void 0 === e || e.forEach((function(e) {
                    return e.setUserP1Consent(t)
                }))
            }, t.prototype.setUserP4Consent = function(t) {
                var e;
                null === (e = this.adProviders) || void 0 === e || e.forEach((function(e) {
                    return e.setUserP4Consent(t)
                }))
            }, t.prototype.setVendorConsents = function(t) {
                var e;
                null === (e = this.adProviders) || void 0 === e || e.forEach((function(e) {
                    return e.setVendorConsents(t)
                }))
            }, t.prototype.setChannelId = function(t) {
                this.channelId = t
            }, t.prototype.isFranConfigured = function(t) {
                var e;
                return null != (null === (e = null == t ? void 0 : t.vendors) || void 0 === e ? void 0 : e.fran) && null != (null == t ? void 0 : t.providers)
            }, t.prototype.expandProviderAdUnitCode = function(e) {
                var n = this,
                    i = function(e) {
                        if (e && e.code && n.channelId) {
                            var i = t.PARTNER_ID + "-" + n.channelId,
                                o = n.isFunction(e.code) ? e.code() : e.code,
                                r = o.split("/").pop();
                            e.code = o.replace(r, i + "-" + r)
                        }
                    };
                e && e.adUnit && i(e.adUnit), e && e.adUnits && e.adUnits.forEach((function(t) {
                    return i(t)
                }))
            }, t.prototype.isFunction = function(t) {
                return !!(t && t.constructor && t.call && t.apply)
            }, t.PARTNER_ID = "frvr", t
        }(),
        B = function() {
            function t(t) {
                this.logger = t
            }
            return t.prototype.init = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            }, t.prototype.setProgress = function(t) {
                var e, n = (100 * t).toFixed(1);
                null === (e = this.logger) || void 0 === e || e.info("[channel-web] progress: ".concat(n, "%"))
            }, t.prototype.complete = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        return null === (t = this.logger) || void 0 === t || t.info("[channel-web] complete"), [2]
                    }))
                }))
            }, t
        }(),
        q = function(t) {
            function e() {
                var e = null !== t && t.apply(this, arguments) || this;
                return e.code = "USER_INPUT", e.message = "User rejected prompt to add to home screen", e
            }
            return n(e, t), e
        }(Error),
        G = function() {
            function t(t, e) {
                this.logger = t, this.tracker = e, this.calledAlready = !1
            }
            return t.prototype.init = function() {
                return o(this, void 0, void 0, (function() {
                    var t = this;
                    return r(this, (function(e) {
                        return "serviceWorker" in navigator && (navigator.serviceWorker.register("./service-worker.js").then((function(e) {
                            var n;
                            null === (n = t.logger) || void 0 === n || n.debug("ServiceWorker registration successful with scope: ", e.scope)
                        }), (function(e) {
                            var n;
                            null === (n = t.logger) || void 0 === n || n.debug("ServiceWorker registration failed: ", e)
                        })), window.addEventListener("beforeinstallprompt", (function(e) {
                            var n, i;
                            return null === (n = t.logger) || void 0 === n || n.debug("beforeinstallprompt event received: ", e), t.installPromptEvent || (null === (i = t.tracker) || void 0 === i || i.logEvent("PWA Before Install Prompt", {}), e.preventDefault(), t.installPromptEvent = e), !1
                        }))), [2]
                    }))
                }))
            }, t.prototype.canCreateShortcut = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, !!this.installPromptEvent && !this.calledAlready]
                    }))
                }))
            }, t.prototype.createShortcut = function() {
                var t, e, n, i;
                return o(this, void 0, void 0, (function() {
                    var o;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return null === (t = this.tracker) || void 0 === t || t.logEvent("PWA Install Prompt", {}), this.calledAlready = !0, [4, this.installPromptEvent.prompt()];
                            case 1:
                                if (o = r.sent(), null === (e = this.logger) || void 0 === e || e.debug("PWA Install Prompt returned: ", o), "accepted" !== o.outcome) throw null === (i = this.tracker) || void 0 === i || i.logEvent("PWA Dismissed", {}), new q;
                                return null === (n = this.tracker) || void 0 === n || n.logEvent("PWA Installed", {}), [2]
                        }
                    }))
                }))
            }, t
        }(),
        K = function() {
            function t() {}
            return t.prototype.isIOS = function() {
                return /(ipod|iphone|ipad)/i.test(navigator.userAgent) || /(Macintosh)/i.test(navigator.userAgent) && "ontouchend" in document
            }, t.prototype.isAndroid = function() {
                return /(android)/i.test(navigator.userAgent) && !/(Windows)/i.test(navigator.userAgent)
            }, t.prototype.configure = function(t) {
                this.config = t
            }, t.prototype.needsConfiguration = function() {
                return !0
            }, t.prototype.canMoveToMobile = function() {
                var t, e;
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(n) {
                        return (this.isIOS() && (null === (t = this.config) || void 0 === t ? void 0 : t.iosAppId) || this.isAndroid()) && (null === (e = this.config) || void 0 === e ? void 0 : e.id) ? [2, !0] : [2, !1]
                    }))
                }))
            }, t.prototype.moveToMobile = function() {
                return o(this, void 0, void 0, (function() {
                    var t, e;
                    return r(this, (function(n) {
                        return t = this.config, this.isIOS() ? window.location.href = "https://apps.apple.com/app/" + (null == t ? void 0 : t.id) + "/id" + (null == t ? void 0 : t.iosAppId) + "?mt=1" : this.isAndroid() && (e = "https://play.google.com/store/apps/details?id=com.frvr." + (null == t ? void 0 : t.id), navigator && navigator.getInstalledRelatedApps ? navigator.getInstalledRelatedApps().then((function(n) {
                            n.length > 0 ? window.location.href = "intent://".concat(null == t ? void 0 : t.id, "/#Intent;scheme=frvr;package=com.frvr.").concat(null == t ? void 0 : t.id, ";end") : window.location.href = e
                        })).catch((function() {
                            console.warn("Related Apps API is not supported. Redirecting to Google Play."), window.location.href = e
                        })) : window.location.href = e), [2]
                    }))
                }))
            }, t
        }(),
        J = function() {
            function e(t, e) {
                this.pixelId = t, this.logger = e, this.hasInitEventBeenSent = !1
            }
            return e.prototype.init = function(t) {
                return o(this, void 0, void 0, (function() {
                    var n = this;
                    return r(this, (function(i) {
                        return this.addFacebookMetaPixelQueue(), t.onConsentChanged((function(t) {
                            (t & e.REQUIRED_CONSENT_FLAGS) === e.REQUIRED_CONSENT_FLAGS && n.addFacebookMetaPixelLoader()
                        })), [2]
                    }))
                }))
            }, e.prototype.getName = function() {
                return "metapixel"
            }, e.prototype.send = function(t, e, n, i) {
                switch (t) {
                    case "page_loading":
                        this.fbqTrack("PageView");
                        break;
                    case "iap_request_payment_success":
                        this.fbqTrack("Purchase", {
                            currency: n.currencyCode,
                            value: n.priceValue
                        })
                }
            }, e.prototype.fbqTrack = function(t, e) {
                var n, i, o;
                window.fbq ? (this.hasInitEventBeenSent || (null === (i = this.logger) || void 0 === i || i.debug("[metapixel-analytics] tracking fbq event", "init", this.pixelId), window.fbq("init", this.pixelId), this.hasInitEventBeenSent = !0), null === (o = this.logger) || void 0 === o || o.debug("[metapixel-analytics] tracking fbq event", t, e), void 0 !== e ? window.fbq("track", t, e) : window.fbq("track", t)) : null === (n = this.logger) || void 0 === n || n.error("[metapixel-analytics] window.fbq not found, enqueueing event")
            }, e.prototype.addFacebookMetaPixelQueue = function() {
                var t;
                if (!window.fbq) {
                    null === (t = this.logger) || void 0 === t || t.debug("[metapixel-analytics] installing metapixel queue");
                    this.appendScript("\n    !function(f,b,e,v,n,t,s)\n    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n    n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n    n.queue=[];}(window, document,'script',\n    'https://connect.facebook.net/en_US/fbevents.js');\n    ")
                }
            }, e.prototype.addFacebookMetaPixelLoader = function() {
                var t;
                if (!this.hasScriptLoaderBeenAppended) {
                    null === (t = this.logger) || void 0 === t || t.debug("[metapixel-analytics] installing metapixel loader");
                    this.appendScript("\n    !function(f,b,e,v,n,t,s)\n    {t=b.createElement(e);t.async=!0;\n    t.src=v;s=b.getElementsByTagName(e)[0];\n    s.parentNode.insertBefore(t,s)}(window, document,'script',\n    'https://connect.facebook.net/en_US/fbevents.js');\n    "), this.hasScriptLoaderBeenAppended = !0
                }
            }, e.prototype.appendScript = function(t) {
                var e = document.createElement("script"),
                    n = document.createTextNode(t);
                e.appendChild(n), window.document.getElementsByTagName("head")[0].appendChild(e)
            }, e.REQUIRED_CONSENT_FLAGS = t.ConsentOptions.P4PersonalizedAds | t.ConsentOptions.P5PersonalizedContentProfile | t.ConsentOptions.P7MeasureAdPerformance, e
        }();
    ! function() {
        for (var t = [], e = 0; 64 > e;) t[e] = 0 | 4294967296 * Math.abs(Math.sin(++e))
    }();
    var Y, Q = function() {
            function t(t, e) {
                this.auth = e, this.baseUrl = t.replace(/\/$/, "")
            }
            return t.prototype.getAllPlayerObjects = function(t, e, n) {
                var i;
                return o(this, void 0, void 0, (function() {
                    var o, s, a;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return o = new URLSearchParams, void 0 !== n && o.set("keys", null != n ? n : ""), s = o.toString(), [4, null === (i = this.auth) || void 0 === i ? void 0 : i.authenticatedFetch("".concat(this.baseUrl, "/player/").concat(t, "/").concat(e, "?").concat(s), {
                                    method: "GET",
                                    headers: {
                                        "Content-Type": "application/json"
                                    }
                                })];
                            case 1:
                                if (!(a = r.sent()).ok) throw new $(a);
                                return [4, a.json()];
                            case 2:
                                return [2, r.sent()]
                        }
                    }))
                }))
            }, t.prototype.createPlayerObject = function(t, e, n) {
                var i;
                return o(this, void 0, void 0, (function() {
                    var o;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, null === (i = this.auth) || void 0 === i ? void 0 : i.authenticatedFetch("".concat(this.baseUrl, "/player/").concat(t, "/").concat(e), {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(n)
                                })];
                            case 1:
                                if (!(o = r.sent()).ok) throw new $(o);
                                return [4, o.json()];
                            case 2:
                                return [2, r.sent()]
                        }
                    }))
                }))
            }, t.prototype.updatePlayerObject = function(t, e, n, i) {
                var s;
                return o(this, void 0, void 0, (function() {
                    var o;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, null === (s = this.auth) || void 0 === s ? void 0 : s.authenticatedFetch("".concat(this.baseUrl, "/player/").concat(t, "/").concat(e, "/").concat(n), {
                                    method: "PATCH",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(i)
                                })];
                            case 1:
                                if (!(o = r.sent()).ok) throw new $(o);
                                return [4, o.json()];
                            case 2:
                                return [2, r.sent()]
                        }
                    }))
                }))
            }, t.prototype.deletePlayerObject = function(t, e, n, i) {
                var s;
                return o(this, void 0, void 0, (function() {
                    var o;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return [4, null === (s = this.auth) || void 0 === s ? void 0 : s.authenticatedFetch("".concat(this.baseUrl, "/player/").concat(t, "/").concat(e, "/").concat(n), {
                                    method: "DELETE",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(i)
                                })];
                            case 1:
                                if (!(o = r.sent()).ok) throw new $(o);
                                return [4, o.json()];
                            case 2:
                                return [2, r.sent()]
                        }
                    }))
                }))
            }, t
        }(),
        $ = function(t) {
            function e(e) {
                var n = t.call(this, e.statusText) || this;
                return n.response = e, n.response = e, n.name = "ResponseError", n
            }
            return n(e, t), e
        }(Error),
        Z = {
            prod: "https://crucible.frvr.com/v1/storage",
            staging: "https://staging.crucible.frvr.com/v1/storage"
        },
        X = function() {
            function t(t, e) {
                var n, i, o, r = this,
                    s = (null == t ? void 0 : t.env) || "prod",
                    a = null !== (n = null == t ? void 0 : t.overrideURL) && void 0 !== n ? n : Z[s];
                this.gameId = t.gameId, this.logger = null == e ? void 0 : e.logger, this.auth = e.auth, null === (i = this.logger) || void 0 === i || i.log("[frvr-sdk] Player Storage for game ".concat(this.gameId, " on ").concat(a));
                var d = null !== (o = e.clientBuilder) && void 0 !== o ? o : function(t) {
                    return new Q(t, r.auth)
                };
                this.client = d(a, this.auth)
            }
            return t.prototype.setItems = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e, n = this;
                    return r(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return e = t.map((function(t) {
                                    return n.upsertItem(t.key, t.value)
                                })), [4, Promise.allSettled(e)];
                            case 1:
                                return i.sent(), [2]
                        }
                    }))
                }))
            }, t.prototype.getItems = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e, n;
                    return r(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return [4, this.client.getAllPlayerObjects(this.getUserId(), this.gameId, t.join(","))];
                            case 1:
                                return e = i.sent(), n = e.items.map((function(t) {
                                    return [t.key, t.data]
                                })), [2, Object.fromEntries(n)]
                        }
                    }))
                }))
            }, t.prototype.removeItems = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e, n, i = this;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return e = this.getUserId(), n = t.map((function(t) {
                                    return i.client.deletePlayerObject(e, i.gameId, t, void 0)
                                })), [4, Promise.allSettled(n)];
                            case 1:
                                return o.sent(), [2]
                        }
                    }))
                }))
            }, t.prototype.isPersistent = function() {
                return !0
            }, t.prototype.getAllItems = function() {
                return o(this, void 0, void 0, (function() {
                    var t, e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return [4, this.client.getAllPlayerObjects(this.getUserId(), this.gameId)];
                            case 1:
                                return t = n.sent(), e = t.items.map((function(t) {
                                    return [t.key, t.data]
                                })), [2, Object.fromEntries(e)]
                        }
                    }))
                }))
            }, t.prototype.upsertItem = function(t, e) {
                return o(this, void 0, void 0, (function() {
                    var n;
                    return r(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                n = this.getUserId(), i.label = 1;
                            case 1:
                                return i.trys.push([1, 3, , 5]), [4, this.client.updatePlayerObject(n, this.gameId, t, {
                                    version: void 0,
                                    data: e
                                })];
                            case 2:
                                return i.sent(), [3, 5];
                            case 3:
                                return i.sent(), [4, this.client.createPlayerObject(n, this.gameId, {
                                    key: t,
                                    data: e
                                })];
                            case 4:
                                return i.sent(), [3, 5];
                            case 5:
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.getUserId = function() {
                return this.auth.getFRVRID()
            }, t
        }();
    (Y = {})[u.PRODUCTION] = "https://crucible.frvr.com", Y[u.BETA] = "https://staging.crucible.frvr.com", Y[u.DEVELOPMENT] = "https://staging.crucible.frvr.com";
    var tt = {
            isSupported: function() {
                return !1
            },
            getLeaderboardsChannelId: function() {
                return "empty"
            },
            getCurrentTournament: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, null]
                    }))
                }))
            },
            create: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, null]
                    }))
                }))
            },
            postScore: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            },
            share: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            },
            getActiveTournaments: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, []]
                    }))
                }))
            },
            join: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            },
            leave: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            },
            invitePlayers: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            }
        },
        et = function() {
            function e(e, n) {
                var o;
                this.adConfigProvider = e, this.fran = n, this.adConfigProvider = e, this.fran = null != n ? n : new W, this.fran.setChannelId(t.inMemoryChannelMapper.getChannel()), null !== (o = this.adConfigProvider) && void 0 !== o || (this.adConfigProvider = new c(t.inMemoryChannelMapper.getChannel(), this.getId())), this.characteristics = i(i({}, t.defaultCharacteristics), {
                    hasDedicatedLoadingScreen: !1
                })
            }
            return e.prototype.onModulesUpdated = function(t) {
                var e = t.logger,
                    n = t.tracker;
                this.logger = e, this.tracker = n
            }, e.prototype.setConfig = function(t) {
                this.gameId = t.gameId
            }, e.prototype.getId = function() {
                return "web"
            }, e.prototype.getBootstrapper = function() {
                return new B(this.logger)
            }, e.prototype.getConsentProvider = function() {
                return E
            }, e.prototype.getAnalyticsProviders = function(e) {
                var n, i = {
                        pixelId: null === (n = null == e ? void 0 : e.metapixel) || void 0 === n ? void 0 : n.pixelId
                    },
                    o = i.pixelId && new J(i.pixelId);
                return s([new t.FRVRAnalytics({
                    disableSendBeacon: !this.characteristics.allowSendBeacon
                })], o ? [o] : [], !0)
            }, e.prototype.getAnalyticsIDProvider = function(e) {
                return new t.WebIDProvider(e)
            }, e.prototype.getAdsProviders = function(t) {
                return s([], this.fran.getProviders(t), !0)
            }, e.prototype.getShortcutProvider = function() {
                return new G(this.logger, this.tracker)
            }, e.prototype.getLocalStorageProvider = function() {
                return t.buildStorageProvider([t.WebLocalStorageProvider.providerName, v.providerName])
            }, e.prototype.getCloudStorageProvider = function(t, e) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(n) {
                        return [2, new X(i({
                            gameId: this.gameId
                        }, null == e ? void 0 : e.playerStorage), {
                            auth: t,
                            logger: this.logger
                        })]
                    }))
                }))
            }, e.prototype.getTrackerContextProvider = function(e) {
                return t.buildTrackerWebContextProvider(e)
            }, e.prototype.getCrossplay = function() {
                return new K
            }, e.prototype.getCharacteristics = function() {
                return this.characteristics
            }, e.prototype.getAdsConfig = function(t) {
                var e;
                return o(this, void 0, void 0, (function() {
                    var n;
                    return r(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                if (!(null == t ? void 0 : t.remote)) return [2, t];
                                if (!this.gameId) throw new Error("Game ID is not set");
                                i.label = 1;
                            case 1:
                                return i.trys.push([1, 3, , 4]), [4, this.adConfigProvider.get(this.gameId)];
                            case 2:
                                return [2, i.sent()];
                            case 3:
                                return n = i.sent(), null === (e = this.logger) || void 0 === e || e.error(n), [3, 4];
                            case 4:
                                return [2, t]
                        }
                    }))
                }))
            }, e.prototype.getTournamentsProvider = function() {
                return t = this.getId(), i(i({}, tt), {
                    getLeaderboardsChannelId: function() {
                        return t
                    }
                });
                var t
            }, e
        }(),
        nt = function() {
            function e() {}
            return e.prototype.getName = function() {
                return "crazygames"
            }, e.prototype.isReady = function() {
                var t, e, n;
                return void 0 !== (null === (n = null === (e = null === (t = window.CrazyGames) || void 0 === t ? void 0 : t.CrazySDK) || void 0 === e ? void 0 : e.getInstance) || void 0 === n ? void 0 : n.call(e))
            }, e.prototype.useManualControl = function() {
                return !1
            }, e.prototype.init = function(e, n, i) {
                return o(this, void 0, void 0, (function() {
                    var e, n = this;
                    return r(this, (function(o) {
                        if (this.adTracker = i, !(e = this.getCrazyGamesInstance())) throw new Error("CrazyGames SDK not available");
                        return e.addEventListener("adStarted", (function() {
                            n.adTracker.receivedAdResponse(t.AdResponseStatus.SUCCESS), n.adTracker.willShowAd(!1)
                        })), e.addEventListener("adFinished", (function() {
                            n.adTracker.finishedAd(t.AdFinishedStatus.SUCCESS)
                        })), e.addEventListener("adError", (function() {
                            n.adTracker.receivedAdResponse(t.AdResponseStatus.ERROR), n.adTracker.finishedAd(t.AdFinishedStatus.ERROR)
                        })), [2]
                    }))
                }))
            }, e.prototype.setUserConsent = function(t) {}, e.prototype.show = function() {
                var e = this;
                return new Promise((function(n, i) {
                    var o = e.getCrazyGamesInstance();
                    if (o) {
                        var r = !1,
                            s = function() {
                                r = !0
                            },
                            a = function() {
                                u(), n({
                                    success: !0,
                                    code: e.getAdSuccessCode()
                                })
                            },
                            d = function() {
                                u(), i({
                                    success: !1,
                                    code: r ? t.AdError.ON_SHOW : t.AdError.ON_LOAD
                                })
                            },
                            u = function() {
                                o.removeEventListener("adStarted", s), o.removeEventListener("adFinished", a), o.removeEventListener("adError", d)
                            };
                        o.addEventListener("adStarted", s), o.addEventListener("adFinished", a), o.addEventListener("adError", d), e.adTracker.requestingAd(), o.requestAd(e.getCrazyGamesAdType())
                    } else i(new Error("CrazyGames SDK not available"))
                }))
            }, e.prototype.getCrazyGamesInstance = function() {
                var t, e, n;
                return null === (n = null === (e = null === (t = window.CrazyGames) || void 0 === t ? void 0 : t.CrazySDK) || void 0 === e ? void 0 : e.getInstance) || void 0 === n ? void 0 : n.call(e)
            }, e
        }(),
        it = function(e) {
            function i() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.CRAZYGAMES_INTERSTITIAL_TYPE = "midgame", t
            }
            return n(i, e), i.prototype.getType = function() {
                return t.AdType.INTERSTITIAL
            }, i.prototype.getCrazyGamesAdType = function() {
                return this.CRAZYGAMES_INTERSTITIAL_TYPE
            }, i.prototype.getAdSuccessCode = function() {
                return t.AdSuccess.DELIVERED
            }, i
        }(nt),
        ot = function(e) {
            function i() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.CRAZYGAMES_REWARDED_TYPE = "rewarded", t
            }
            return n(i, e), i.prototype.getType = function() {
                return t.AdType.REWARD
            }, i.prototype.getCrazyGamesAdType = function() {
                return this.CRAZYGAMES_REWARDED_TYPE
            }, i.prototype.getAdSuccessCode = function() {
                return t.AdSuccess.COMPLETED
            }, i
        }(nt);

    function rt(t, e) {
        return new Promise((function(n) {
            var i = document.getElementById(e);
            i ? n() : ((i = document.createElement("script")).setAttribute("id", e), i.setAttribute("type", "text/javascript"), i.setAttribute("src", t), document.getElementsByTagName("head")[0].appendChild(i), i.onload = function() {
                return n()
            })
        }))
    }

    function st(t, e, n) {
        return new Promise((function(i, o) {
            var r, s = 0;
            ! function a() {
                if (s++ > e) return r && clearTimeout(r), void o(new Error("Retry limit exceeded"));
                t().then((function(t) {
                    if (void 0 !== t) return r && clearTimeout(r), void i(t);
                    r = setTimeout(a, n)
                })).catch((function() {
                    r = setTimeout(a, n)
                }))
            }()
        }))
    }
    var at, dt = function() {
            function t(t) {
                this.logger = t
            }
            return t.prototype.init = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    var e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.logger.info("CrazyGames bootstrapper init"), [4, rt("https://sdk.crazygames.com/crazygames-sdk-v1.js", "crazySdkScript")];
                            case 1:
                                n.sent(), n.label = 2;
                            case 2:
                                return (null === (t = window.CrazyGames) || void 0 === t ? void 0 : t.CrazySDK) ? [3, 4] : [4, new Promise((function(t) {
                                    return setTimeout(t, 100)
                                }))];
                            case 3:
                                return n.sent(), [3, 2];
                            case 4:
                                return (e = window.CrazyGames.CrazySDK.getInstance()).init(), [4, new Promise((function(t) {
                                    e.addEventListener("initialized", (function() {
                                        t()
                                    }))
                                }))];
                            case 5:
                                return n.sent(), [2]
                        }
                    }))
                }))
            }, t.prototype.setProgress = function(t) {}, t.prototype.complete = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            }, t
        }(),
        ut = function(t) {
            function e(e, n) {
                return t.call(this, e, n) || this
            }
            return n(e, t), e.prototype.getId = function() {
                return "crazygames"
            }, e.prototype.getBootstrapper = function() {
                return new dt(this.logger)
            }, e.prototype.getAdsProviders = function(e) {
                return t.prototype.getAdsProviders.call(this, e).concat([new it, new ot])
            }, e
        }(et),
        ct = function() {
            function e() {}
            return e.prototype.getType = function() {
                return t.AdType.INTERSTITIAL
            }, e.prototype.getName = function() {
                return "microsoft"
            }, e.prototype.isReady = function() {
                return !!this.adInstance
            }, e.prototype.init = function(t, e, n) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return this.adTracker = n, this.preload(), [2]
                    }))
                }))
            }, e.prototype.preload = function() {
                var e = this;
                if (!this.adInstance) return this.loadingPromise || (this.loadingPromise = st((function() {
                    return e.load()
                }), 5, 500).catch((function(n) {
                    e.adTracker.receivedAdResponse(t.AdResponseStatus.NOFILL)
                })).finally((function() {
                    e.loadingPromise = void 0
                }))), this.loadingPromise
            }, e.prototype.load = function() {
                return o(this, void 0, void 0, (function() {
                    var e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.adTracker.requestingAd(), [4, $msstart.loadAdsAsync()];
                            case 1:
                                return (null == (e = n.sent()) ? void 0 : e.instanceId) ? (this.adInstance = e, this.adTracker.receivedAdResponse(t.AdResponseStatus.SUCCESS, e.instanceId), [2, e]) : (this.adTracker.receivedAdResponse(t.AdResponseStatus.NOFILL), [2])
                        }
                    }))
                }))
            }, e.prototype.show = function() {
                return o(this, void 0, void 0, (function() {
                    var e, n, i, o, s;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return (e = !!this.adInstance) ? [3, 2] : [4, this.preload()];
                            case 1:
                                r.sent(), r.label = 2;
                            case 2:
                                if (!this.adInstance) return [2, {
                                    success: !1,
                                    code: t.AdError.NOFILL,
                                    message: "No ad instance"
                                }];
                                n = this.adInstance, this.adInstance = void 0, this.adTracker.willShowAd(e, n.instanceId), r.label = 3;
                            case 3:
                                return r.trys.push([3, 5, , 6]), [4, $msstart.showAdsAsync(n.instanceId)];
                            case 4:
                                return i = r.sent(), [3, 6];
                            case 5:
                                return o = r.sent(), [2, {
                                    success: !1,
                                    code: t.AdError.ON_SHOW,
                                    message: o.message
                                }];
                            case 6:
                                return r.trys.push([6, 8, , 9]), [4, i.showAdsCompletedAsync()];
                            case 7:
                                return r.sent(), [3, 9];
                            case 8:
                                return s = r.sent(), [2, {
                                    success: !1,
                                    code: t.AdError.ON_SHOW,
                                    message: s.message
                                }];
                            case 9:
                                return [2, {
                                    success: !0,
                                    code: t.AdSuccess.COMPLETED
                                }]
                        }
                    }))
                }))
            }, e.prototype.useManualControl = function() {
                return !1
            }, e.prototype.setUserConsent = function(t) {}, e
        }(),
        lt = function() {
            function t(t, e, n) {
                this.logger = t, this.entryPoint = e, this.tracker = n
            }
            return t.prototype.init = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    var e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.logger.info("Microsoft PWA bootstrapper init"), [4, rt("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.4.min.js", "msPwaSdkScript")];
                            case 1:
                                if (n.sent(), !(null === (t = null === $msstart || void 0 === $msstart ? void 0 : $msstart.isInMicrosoftStart) || void 0 === t ? void 0 : t.call($msstart))) throw new Error("Not running in Microsoft Start environment");
                                return this.logger.info("Running in Microsoft Start environment"), [4, this.entryPoint.getData()];
                            case 2:
                                return e = n.sent(), this.tracker.logEvent("entry_point", {
                                    channel: "microsoft",
                                    entry_point_id: e.entryPointId,
                                    entry_point_name: e.entryPointName
                                }), [2]
                        }
                    }))
                }))
            }, t.prototype.setProgress = function(t) {}, t.prototype.complete = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            }, t
        }(),
        ht = function() {
            function t(t) {
                this.tracker = t
            }
            return t.prototype.init = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            }, t.prototype.canCreateShortcut = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, $msstart.isInMicrosoftStart()]
                    }))
                }))
            }, t.prototype.createShortcut = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        switch (t.label) {
                            case 0:
                                return [4, $msstart.promptInstallAsync()];
                            case 1:
                                switch (t.sent()) {
                                    case "PROMPT_INSTALL_ACCEPTED":
                                        this.tracker.logEvent("ms_promp_install_successfull", {});
                                        break;
                                    case "PROMPT_INSTALL_DISMISSED":
                                        this.tracker.logEvent("ms_promp_install_dismissed", {})
                                }
                                return [2]
                        }
                    }))
                }))
            }, t
        }(),
        pt = function() {
            function t() {}
            return t.prototype.getData = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, this.getMSEntryPoint()]
                    }))
                }))
            }, t.prototype.getName = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        return [2, null === (t = this.getMSEntryPoint()) || void 0 === t ? void 0 : t.entryPointName]
                    }))
                }))
            }, t.prototype.getMSEntryPoint = function() {
                if (this.msEntrypoint) return this.msEntrypoint;
                if (!(null === $msstart || void 0 === $msstart ? void 0 : $msstart.isInMicrosoftStart())) throw new Error("Not running in Microsoft Start environment");
                return this.msEntrypoint = $msstart.getEntryPointInfo(), this.msEntrypoint
            }, t
        }(),
        gt = function(t) {
            function e(e, n) {
                var i = t.call(this, e, n) || this;
                return i.entryPoint = new pt, i
            }
            return n(e, t), e.prototype.getId = function() {
                return "microsoft"
            }, e.prototype.getBootstrapper = function() {
                return new lt(this.logger, this.entryPoint, this.tracker)
            }, e.prototype.getAdsProviders = function(t) {
                return [new ct]
            }, e.prototype.getShortcutProvider = function() {
                return new ht(this.tracker)
            }, e.prototype.getEntryPointProvider = function() {
                return this.entryPoint
            }, e
        }(et),
        ft = function() {
            function t(t) {
                this.logger = t
            }
            return t.prototype.init = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            }, t.prototype.setProgress = function(t) {
                var e, n = (100 * t).toFixed(1);
                null === (e = this.logger) || void 0 === e || e.info("[channel-web] progress: ".concat(n, "%"))
            }, t.prototype.complete = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        return null === (t = this.logger) || void 0 === t || t.info("[channel-web] complete"), [2]
                    }))
                }))
            }, t
        }();
    ! function(t) {
        t.FRVR = "frvr", t.FACEBOOK_INSTANT = "facebook-instant", t.FACEBOOK_SDK = "facebook-web", t.GOOGLE_INTERNAL = "google-internal", t.SAMSUNG_INSTANT = "samsung-instant", t.APPLE = "apple", t.DISCORD = "discord"
    }(at || (at = {}));
    var vt, mt = function() {
            function t(t, e, n, i) {
                this.platformId = at.DISCORD, this._isLoggingIn = !0, this.isAuthorized = !1, this._isLoggedIn = !1, this.discordAppID = n, this.logger = i
            }
            return t.prototype.init = function(t) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return this._isLoggingIn = !1, this.authFRVR = t, [4, this.doLoginChain()];
                            case 1:
                                return e.sent(), [2]
                        }
                    }))
                }))
            }, t.prototype.doLoginChain = function() {
                return o(this, void 0, void 0, (function() {
                    var t = this;
                    return r(this, (function(e) {
                        return [2, st((function() {
                            return t.retrieveClientSignature().then((function() {
                                if (t.isAuthorized && t.credentials) return t.authFRVR.loginWithProvider(t);
                                throw new Error("[Discord.auth] Authorization failed")
                            })).catch((function(e) {
                                var n;
                                throw null === (n = t.logger) || void 0 === n || n.error("[Discord.auth] Login Chain error in FRVR login", e), e
                            })).then((function() {
                                var e;
                                return null === (e = t.logger) || void 0 === e || e.log("[Discord.auth] Login Chain FRVR login final step", t._isLoggedIn), t._isLoggedIn || void 0
                            }))
                        }), 20, 300).catch((function() {
                            var e;
                            throw null === (e = t.logger) || void 0 === e || e.error("[Discord.auth] Max login attempts reached"), t._isLoggingIn = !1, t.credentials = null, new Error("[Discord.auth] Max login attempts reached")
                        }))]
                    }))
                }))
            }, t.prototype.retrieveClientSignature = function() {
                return o(this, void 0, void 0, (function() {
                    var t = this;
                    return r(this, (function(e) {
                        switch (e.label) {
                            case 0:
                                return [4, window.discordSDK.commands.authorize({
                                    client_id: this.discordAppID,
                                    response_type: "code",
                                    state: "",
                                    prompt: "none",
                                    scope: ["rpc.voice.read", "rpc.activities.write", "guilds", "guilds.members.read", "identify"]
                                }).then((function(e) {
                                    var n;
                                    null === (n = t.logger) || void 0 === n || n.log("[Discord.auth] retrieveClientSignature. Authorize_RPC Response:", e), t.isAuthorized = !0, t.credentials = {
                                        code: e.code,
                                        appId: t.discordAppID
                                    }
                                })).catch((function(e) {
                                    var n;
                                    throw null === (n = t.logger) || void 0 === n || n.error("[Discord.auth] retrieveClientSignature. Authorize_RPC Error:", e), t.isAuthorized = !1, t._isLoggingIn = !1, t.credentials = null, e
                                })).finally((function() {
                                    t._isLoggingIn = !1
                                }))];
                            case 1:
                                return e.sent(), [2]
                        }
                    }))
                }))
            }, t.prototype.onFRVRTokensReceived = function(t) {
                var e;
                return o(this, void 0, void 0, (function() {
                    var n, i, o = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return "discord" != (n = null === (e = t.getRefreshPayload()) || void 0 === e ? void 0 : e.extra).platform ? [2] : (i = (null == n ? void 0 : n.credentials).accessToken, this.credentials.userId = null == n ? void 0 : n.identifier, this.isAuthorized && i ? [4, window.discordSDK.commands.authenticate({
                                    access_token: i
                                }).then((function(t) {
                                    var e;
                                    null === (e = o.logger) || void 0 === e || e.log("[Discord.auth] onFRVRTokensReceived: Authenticate_RPC Response:", t), o._isLoggedIn = !0
                                })).catch((function(t) {
                                    var e;
                                    if (4002 == t.code) return null === (e = o.logger) || void 0 === e || e.log("[Discord.auth] onFRVRTokensReceived: Already authenticated"), o._isLoggedIn = !0, !0;
                                    throw t
                                }))] : [3, 2]);
                            case 1:
                                r.sent(), r.label = 2;
                            case 2:
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.getPlatformId = function() {
                return this.platformId
            }, t.prototype.handlesFRVRLogin = function() {
                return !0
            }, t.prototype.isLoginSupported = function() {
                return !1
            }, t.prototype.isLogoutSupported = function() {
                return !1
            }, t.prototype.prohibitsLoginWithFRVRCredentials = function() {
                return !0
            }, t.prototype.isLoggingIn = function() {
                return this._isLoggingIn
            }, t.prototype.getCredentials = function() {
                return this.credentials
            }, t.prototype.getLoginSignature = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        return [2, null === (t = this.credentials) || void 0 === t ? void 0 : t.code]
                    }))
                }))
            }, t.prototype.getUserID = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        return [2, null === (t = this.credentials) || void 0 === t ? void 0 : t.userId]
                    }))
                }))
            }, t.prototype.isLoggedIn = function() {
                return this._isLoggedIn
            }, t.prototype.login = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, !1]
                    }))
                }))
            }, t.prototype.logout = function() {}, t
        }(),
        yt = function() {
            function t(t, e) {
                this.auth = e, this.baseUrl = t.replace(/\/$/, "")
            }
            return t.prototype.getFriends = function(t) {
                var e;
                return o(this, void 0, void 0, (function() {
                    var n;
                    return r(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return [4, null === (e = this.auth) || void 0 === e ? void 0 : e.authenticatedFetch("".concat(this.baseUrl, "/friends/").concat(t), {
                                    method: "GET",
                                    headers: {
                                        "Content-Type": "application/json"
                                    }
                                })];
                            case 1:
                                if (!(null == (n = i.sent()) ? void 0 : n.ok)) throw new wt(n);
                                return [4, n.json()];
                            case 2:
                                return [2, i.sent()]
                        }
                    }))
                }))
            }, t.prototype.addFriend = function(t, e) {
                var n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, null === (n = this.auth) || void 0 === n ? void 0 : n.authenticatedFetch("".concat(this.baseUrl, "/friends/").concat(t), {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(e)
                                })];
                            case 1:
                                if (!(null == (i = o.sent()) ? void 0 : i.ok)) throw new wt(i);
                                return [4, i.json()];
                            case 2:
                                return [2, o.sent()]
                        }
                    }))
                }))
            }, t.prototype.removeFriend = function(t, e) {
                var n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, null === (n = this.auth) || void 0 === n ? void 0 : n.authenticatedFetch("".concat(this.baseUrl, "/friends/").concat(t), {
                                    method: "DELETE",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(e)
                                })];
                            case 1:
                                if (!(null == (i = o.sent()) ? void 0 : i.ok)) throw new wt(i);
                                return [2]
                        }
                    }))
                }))
            }, t.prototype.syncFriends = function(t, e) {
                var n;
                return o(this, void 0, void 0, (function() {
                    var i;
                    return r(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return [4, null === (n = this.auth) || void 0 === n ? void 0 : n.authenticatedFetch("".concat(this.baseUrl, "/friends/").concat(t, "/sync"), {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify(e)
                                })];
                            case 1:
                                if (!(null == (i = o.sent()) ? void 0 : i.ok)) throw new wt(i);
                                return [4, i.json()];
                            case 2:
                                return [2, o.sent()]
                        }
                    }))
                }))
            }, t
        }(),
        wt = function(t) {
            function e(e) {
                var n = t.call(this, e.statusText) || this;
                return n.response = e, n.response = e, n.name = "ResponseError", n
            }
            return n(e, t), e
        }(Error);
    ! function(t) {
        t[t.shareMessage = 0] = "shareMessage", t[t.sendUpdate = 1] = "sendUpdate", t[t.invite = 2] = "invite", t[t.getFriends = 3] = "getFriends", t[t.getContextId = 4] = "getContextId", t[t.getContextData = 5] = "getContextData", t[t.getContextPlayers = 6] = "getContextPlayers"
    }(vt || (vt = {}));
    var bt, At, Et, Pt = function() {
            function t(t) {
                var e = t.provider;
                this.API = vt, this.provider = e
            }
            return t.prototype.shareMessage = function(t) {
                return this.provider.shareMessage(t)
            }, t.prototype.sendUpdate = function(t) {
                return this.provider.sendUpdate(t)
            }, t.prototype.invite = function(t) {
                return this.provider.invite(t)
            }, t.prototype.getFriends = function() {
                return this.provider.getFriends()
            }, t.prototype.getContextData = function() {
                return this.provider.getContextData()
            }, t.prototype.getContextId = function() {
                return this.provider.getContextId()
            }, t.prototype.getContextPlayers = function() {
                return this.provider.getContextPlayers()
            }, t.prototype.getSupportedAPIs = function() {
                return this.provider.getSupportedAPIs()
            }, t.prototype.isSupportedAPI = function(t) {
                return -1 !== this.provider.getSupportedAPIs().indexOf(t)
            }, t
        }(),
        St = {
            shareMessage: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            },
            sendUpdate: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            },
            invite: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            },
            getContextId: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, Promise.resolve("")]
                    }))
                }))
            },
            getContextData: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, Promise.resolve({})]
                    }))
                }))
            },
            getContextPlayers: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, Promise.resolve([])]
                    }))
                }))
            },
            getFriends: function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, Promise.resolve([])]
                    }))
                }))
            },
            getSupportedAPIs: function() {
                return []
            }
        };
    ! function(t) {
        t.UPDATE_STATUS = "UPDATE_STATUS", t.SEND_GAME_INVITE = "SEND_GAME_INVITE"
    }(bt || (bt = {})),
    function(t) {
        t.onFriendStatusUpdated = "FRIEND_STATUS_UPDATED", t.onConnect = "ON_CONNECT", t.onGameInvite = "RECEIVE_GAME_INVITE", t.onError = "ON_ERROR"
    }(At || (At = {})),
    function(t) {
        t.open = "open", t.close = "close", t.error = "error", t.message = "message", t.retry = "retry"
    }(Et || (Et = {}));
    var It = function() {
            function t(t) {
                var e, n = this;
                this.retries = 0, this.eventListeners = {
                    open: [],
                    close: [],
                    error: [],
                    message: [],
                    retry: []
                }, this.closedByUser = !1, this.RECONNECT_DEFAULT_BACKOFF_MS = 1e3, this.RECONNECT_RETRY_MS = 500, this.onOpen = function(t) {
                    return n.handleEvent(Et.open, t)
                }, this.onClose = function(t) {
                    return n.handleEvent(Et.close, t)
                }, this.onError = function(t) {
                    return n.handleEvent(Et.error, t)
                }, this.onMessage = function(t) {
                    return n.handleEvent(Et.message, t)
                }, this.url = t.url, this.logger = t.logger, this.webSocketBuilder = null !== (e = t.webSocketBuilder) && void 0 !== e ? e : function(t) {
                    return new WebSocket(t)
                }
            }
            return t.prototype.send = function(t) {
                this.websocket ? this.getConnectionStatus() === WebSocket.OPEN ? this.closedByUser ? this.logger.error("WebsocketClient: Cannot send message, closed by user") : this.websocket.send(t) : this.logger.error("WebsocketClient: Cannot send message, not connected") : this.logger.error("WebsocketClient: Cannot send message, not initialised")
            }, t.prototype.connect = function() {
                return o(this, void 0, void 0, (function() {
                    var t, e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return this.closedByUser = !1, void 0 !== this.websocket && (this.websocket.removeEventListener(Et.open, this.onOpen), this.websocket.removeEventListener(Et.close, this.onClose), this.websocket.removeEventListener(Et.error, this.onError), this.websocket.removeEventListener(Et.message, this.onMessage), this.websocket.close()), t = this, e = this.webSocketBuilder, [4, this.url()];
                            case 1:
                                return t.websocket = e.apply(this, [n.sent()]), this.websocket.addEventListener(Et.open, this.onOpen), this.websocket.addEventListener(Et.close, this.onClose), this.websocket.addEventListener(Et.error, this.onError), this.websocket.addEventListener(Et.message, this.onMessage), [2]
                        }
                    }))
                }))
            }, t.prototype.close = function(t, e) {
                var n;
                this.closedByUser = !0, null === (n = this.websocket) || void 0 === n || n.close(t, e)
            }, t.prototype.addEventListener = function(t, e) {
                var n = {
                    listener: e
                };
                this.eventListeners[t].push(n)
            }, t.prototype.removeEventListener = function(t, e) {
                this.eventListeners[t] = this.eventListeners[t].filter((function(t) {
                    return t.listener !== e
                }))
            }, t.prototype.getConnectionStatus = function() {
                return this.websocket ? this.websocket.readyState : WebSocket.CLOSED
            }, t.prototype.handleEvent = function(t, e) {
                switch (t) {
                    case Et.close:
                        this.closedByUser || this.reconnect();
                        break;
                    case Et.open:
                        this.retries = 0;
                    case Et.error:
                    case Et.message:
                }
                this.dispatchEvent(t, e)
            }, t.prototype.reconnect = function() {
                var t = this,
                    e = this.RECONNECT_RETRY_MS * this.retries + this.RECONNECT_DEFAULT_BACKOFF_MS,
                    n = {
                        detail: {
                            retries: this.retries++,
                            backoff: e
                        }
                    };
                setTimeout((function() {
                    if (!t.closedByUser) {
                        var e = new CustomEvent(Et.retry, n);
                        t.dispatchEvent(Et.retry, e), t.connect()
                    }
                }), e)
            }, t.prototype.dispatchEvent = function(t, e) {
                this.eventListeners[t].forEach((function(t) {
                    t.listener(e)
                }))
            }, t
        }(),
        Ct = function() {
            function t(t, e) {
                var n, i = this;
                this.friendsStatus = new Map, this.eventListeners = ((n = {})[At.onFriendStatusUpdated] = [], n[At.onConnect] = [], n[At.onGameInvite] = [], n[At.onError] = [], n), this.SocialEvents = At;
                var o = t.apiHost,
                    r = t.gameId;
                if (this.apiHost = o, this.gameId = r, this.logger = e.logger, this.auth = e.auth, this.websocket = e.webSocketClientBuilder ? e.webSocketClientBuilder() : new It({
                        logger: this.logger,
                        url: function() {
                            return i.getFreshUrl(i.apiHost, i.gameId)
                        }
                    }), !this.websocket) throw new Error("websocket client is not defined");
                this.on(At.onConnect, (function(t) {
                    for (var e = 0, n = t.data.friends; e < n.length; e++) {
                        var o = n[e];
                        i.friendsStatus.set(o.userId, o)
                    }
                })), this.on(At.onFriendStatusUpdated, (function(t) {
                    var e = t.data;
                    i.friendsStatus.set(e.userId, e)
                })), this.websocket.addEventListener(Et.open, (function() {
                    i.logger.log("connected to social server")
                })), this.websocket.addEventListener(Et.close, (function(t) {
                    i.logger.log("websocket client closed", t)
                })), this.websocket.addEventListener(Et.error, (function(t) {
                    i.logger.error("websocket client error", t)
                })), this.websocket.addEventListener(Et.message, (function(t) {
                    var e = t.data,
                        n = JSON.parse(e);
                    Object.values(At).includes(n.code) ? i.dispatchEvent(n.code, n) : i.logger.error("event type is not supported")
                })), this.auth.addStatusChangeListener((function(t) {
                    return i.onAuthStatusChanged(t)
                }))
            }
            return t.prototype.connect = function() {
                var t = this.connectedUser === this.auth.getFRVRID(),
                    e = this.websocket.getConnectionStatus();
                (e !== WebSocket.OPEN && e !== WebSocket.CONNECTING || !t) && (this.connectedUser = this.auth.getFRVRID(), this.websocket.connect())
            }, t.prototype.close = function() {
                this.friendsStatus.clear(), this.connectedUser = void 0, this.websocket.close()
            }, t.prototype.on = function(t, e) {
                var n = {
                        listener: e
                    },
                    i = this.eventListeners[t];
                if (!i) throw new Error('event type "'.concat(t, '" is not supported'));
                i.push(n)
            }, t.prototype.getFriendsStatus = function() {
                return Array.from(this.friendsStatus.values())
            }, t.prototype.sendGameInvite = function(t, e, n) {
                var i = {
                    code: bt.SEND_GAME_INVITE,
                    data: {
                        recipientId: t,
                        lobbyId: e,
                        gameId: this.gameId,
                        metadata: n
                    }
                };
                this.send(i)
            }, t.prototype.updateStatus = function(t) {
                var e = {
                    code: bt.UPDATE_STATUS,
                    data: {
                        metadata: t,
                        gameId: this.gameId
                    }
                };
                this.send(e)
            }, t.prototype.dispatchEvent = function(t, e) {
                this.eventListeners[t].forEach((function(t) {
                    t.listener(e)
                }))
            }, t.prototype.send = function(t) {
                this.websocket.send(JSON.stringify(t))
            }, t.prototype.onAuthStatusChanged = function(t) {
                return o(this, void 0, void 0, (function() {
                    var e;
                    return r(this, (function(n) {
                        return t ? (e = this.websocket.getConnectionStatus()) !== WebSocket.OPEN && e !== WebSocket.CONNECTING || this.connect() : this.close(), [2]
                    }))
                }))
            }, t.prototype.getFreshUrl = function(t, e) {
                return o(this, void 0, void 0, (function() {
                    var n;
                    return r(this, (function(i) {
                        switch (i.label) {
                            case 0:
                                return [4, this.auth.getFreshAccessToken()];
                            case 1:
                                return n = i.sent(), [2, "wss://".concat(t, "/ws?token=").concat(n, "&gameId=").concat(e)]
                        }
                    }))
                }))
            }, t
        }();
    ! function() {
        function t(t, e) {
            var n, o;
            this.config = t, this.container = e, this.API = vt, this.auth = e.auth, this.provider = null !== (n = e.provider) && void 0 !== n ? n : St, this.gameId = t.gameId;
            var r = null !== (o = t.apiHostOverride) && void 0 !== o ? o : t.env === u.PRODUCTION ? "crucible.frvr.com" : "staging.crucible.frvr.com";
            r += "/v1/social", this.webClient = new yt("https://".concat(r), this.auth), this.wsClient = new Ct(i(i({}, this.config), {
                apiHost: r
            }), this.container), this.socialPlatform = new Pt({
                provider: this.provider
            }), this.auth.addStatusChangeListener(this.onAuthStatusChange.bind(this))
        }
        Object.defineProperty(t.prototype, "live", {
            get: function() {
                return this.wsClient
            },
            enumerable: !1,
            configurable: !0
        }), Object.defineProperty(t.prototype, "platform", {
            get: function() {
                return this.socialPlatform
            },
            enumerable: !1,
            configurable: !0
        }), t.prototype.syncFriends = function() {
            return o(this, void 0, void 0, (function() {
                var t, e, n, i, o, s, a, d, u, c;
                return r(this, (function(r) {
                    switch (r.label) {
                        case 0:
                            return [4, this.provider.getFriends()];
                        case 1:
                            t = r.sent(), e = t.reduce((function(t, e) {
                                var n, i = null !== (n = t.get(e.channel)) && void 0 !== n ? n : [];
                                return i.push(e.id), t.set(e.channel, i), t
                            }), new Map), n = [], i = Array.from(e.entries()), o = 0, s = i, r.label = 2;
                        case 2:
                            return o < s.length ? (a = s[o], d = a[0], u = a[1], [4, this.webClient.syncFriends(this.getUserId(), {
                                channel: d,
                                gameId: this.gameId,
                                friendIds: u
                            })]) : [3, 5];
                        case 3:
                            c = r.sent(), n.push.apply(n, c), r.label = 4;
                        case 4:
                            return o++, [3, 2];
                        case 5:
                            return [2, n]
                    }
                }))
            }))
        }, t.prototype.getAllFriends = function() {
            return o(this, void 0, void 0, (function() {
                return r(this, (function(t) {
                    switch (t.label) {
                        case 0:
                            return [4, this.webClient.getFriends(this.getUserId())];
                        case 1:
                            return [2, t.sent()]
                    }
                }))
            }))
        }, t.prototype.addFriend = function(t) {
            return o(this, void 0, void 0, (function() {
                return r(this, (function(e) {
                    switch (e.label) {
                        case 0:
                            return [4, this.webClient.addFriend(this.getUserId(), {
                                friendId: t
                            })];
                        case 1:
                            return [2, e.sent()]
                    }
                }))
            }))
        }, t.prototype.removeFriend = function(t) {
            return o(this, void 0, void 0, (function() {
                return r(this, (function(e) {
                    switch (e.label) {
                        case 0:
                            return [4, this.webClient.removeFriend(this.getUserId(), {
                                friendId: t
                            })];
                        case 1:
                            return [2, e.sent()]
                    }
                }))
            }))
        }, t.prototype.getUserId = function() {
            var t = this.auth.getFRVRID();
            if (null === t) throw new Tt("not logged in");
            return t
        }, t.prototype.onAuthStatusChange = function(t) {
            t && this.syncFriends()
        }, t.prototype.shareMessage = function(t) {
            return this.socialPlatform.shareMessage(t)
        }, t.prototype.sendUpdate = function(t) {
            return this.socialPlatform.sendUpdate(t)
        }, t.prototype.invite = function(t) {
            return this.socialPlatform.invite(t)
        }, t.prototype.getFriends = function() {
            return this.socialPlatform.getFriends()
        }, t.prototype.getSupportedAPIs = function() {
            return this.socialPlatform.getSupportedAPIs()
        }, t.prototype.isSupportedAPI = function(t) {
            return this.socialPlatform.isSupportedAPI(t)
        }
    }();
    var Tt = function(t) {
            function e(e) {
                return t.call(this, e) || this
            }
            return n(e, t), e
        }(Error),
        Ut = function(t, e) {
            return null === e ? null : "https://cdn.discordapp.com/avatars/" + t + "/" + e + ".png"
        },
        Lt = function() {
            function t(t) {
                this.logger = t
            }
            return t.prototype.shareMessage = function(t) {
                return null
            }, t.prototype.sendUpdate = function(t) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, null]
                    }))
                }))
            }, t.prototype.invite = function(t) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2]
                    }))
                }))
            }, t.prototype.getContextId = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        switch (t.label) {
                            case 0:
                                return [4, window.discordSDK.commands.getSelectedVoiceChannel()];
                            case 1:
                                return [2, t.sent().data.id]
                        }
                    }))
                }))
            }, t.prototype.getContextData = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        switch (t.label) {
                            case 0:
                                return [4, window.discordSDK.commands.getSelectedVoiceChannel()];
                            case 1:
                                return [2, t.sent().data]
                        }
                    }))
                }))
            }, t.prototype.getContextPlayers = function() {
                var t;
                return o(this, void 0, void 0, (function() {
                    var e;
                    return r(this, (function(n) {
                        switch (n.label) {
                            case 0:
                                return [4, window.discordSDK.commands.getSelectedVoiceChannel()];
                            case 1:
                                return e = n.sent().data, [2, (null === (t = null == e ? void 0 : e.voice_states) || void 0 === t ? void 0 : t.map((function(t) {
                                    return {
                                        id: t.user.id,
                                        name: t.user.username,
                                        image: Ut(t.user.id, t.user.avatar)
                                    }
                                }))) || []]
                        }
                    }))
                }))
            }, t.prototype.getFriends = function() {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(t) {
                        return [2, window.discordSDK.commands.getSelectedVoiceChannel().then((function(t) {
                            var e;
                            return null === (e = t.data.voice_states) || void 0 === e ? void 0 : e.map((function(t) {
                                return {
                                    id: t.user.id,
                                    name: t.user.username,
                                    image: Ut(t.user.id, t.user.avatar),
                                    channel: "discord",
                                    nickname: t.nick
                                }
                            }))
                        }))]
                    }))
                }))
            }, t.prototype.getSupportedAPIs = function() {
                return [vt.getContextId, vt.getContextData, vt.getContextPlayers]
            }, t
        }(),
        Rt = /\{([a-z]+)\}/g;

    function Dt(t) {
        var e = t.originalURL,
            n = t.prefix,
            i = t.prefixHost,
            o = t.target,
            r = new URL("https://".concat(o)),
            s = function(t) {
                var e = t.replaceAll(".", "\\.").replace(Rt, (function(t, e) {
                    return "(?<".concat(e, ">[\\w-]+)")
                }));
                return new RegExp("".concat(e, "(/|$)"))
            }(r.host),
            a = e.toString().match(s);
        if (null == a) return null;
        var d = new URL(e.toString());
        return d.host = i, d.pathname = n.replace(Rt, (function(t, e) {
            var n, i = null === (n = null == a ? void 0 : a.groups) || void 0 === n ? void 0 : n[e];
            if (null == i) throw new Error("Misconfigured route.");
            return i
        })), d.pathname += "/" === d.pathname ? e.pathname.slice(1) : e.pathname, d.pathname = d.pathname.replace(r.pathname, ""), d
    }

    function Nt(t, e, n) {
        return void 0 === e && (e = window.location.protocol), void 0 === n && (n = window.location.host), t.startsWith("/") ? new URL("".concat(e, "//").concat(n).concat(t)) : new URL(t)
    }

    function kt(t) {
        for (var e = t.url, n = 0, i = t.mappings; n < i.length; n++) {
            var o = i[n],
                r = Dt({
                    originalURL: e,
                    prefix: o.prefix,
                    target: o.target,
                    prefixHost: window.location.host
                });
            if (r) return r
        }
        return e
    }

    function Ot(t) {
        t = function(t) {
            return t.sort((function(t, e) {
                var n = new URL("https://".concat(t.target)).host.split(".");
                return new URL("https://".concat(e.target)).host.split(".").length - n.length
            }))
        }(t || []);
        var e = window.fetch;
        window.fetch = function(n, i) {
            var o = kt({
                url: Nt(n.toString()),
                mappings: t
            });
            return e(o.toString(), i)
        };
        var i = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(e, n, o, r, s) {
            var a = kt({
                url: Nt(n),
                mappings: t
            });
            i.apply(this, [e, a.toString(), o, r, s])
        };
        var o = function(e) {
            function i(n, i) {
                var o = kt({
                    url: Nt(n instanceof URL ? n.toString() : n, "wss:"),
                    mappings: t
                });
                return e.call(this, o.toString(), i) || this
            }
            return n(i, e), i
        }(WebSocket);
        window.WebSocket = o
    }
    var _t = [{
            prefix: "/discord",
            target: "discord.com"
        }, {
            prefix: "/storagegoogleapis",
            target: "storage.googleapis.com"
        }, {
            prefix: "/google-analytics",
            target: "google-analytics.com"
        }, {
            prefix: "/coeus-frvr",
            target: "coeus.frvr.com"
        }, {
            prefix: "/stagingcrucible-frvr",
            target: "staging.crucible.frvr.com"
        }, {
            prefix: "/crucible-frvr",
            target: "crucible.frvr.com"
        }, {
            prefix: "/frvr",
            target: "frvr.com"
        }],
        Mt = function(e) {
            function s() {
                var n = null !== e && e.apply(this, arguments) || this;
                return n.characteristics = i(i({}, t.defaultCharacteristics), {
                    allowExternalLinks: !1,
                    allowInternalLinks: !1,
                    allowNavigation: !1,
                    allowSendBeacon: !1
                }), n
            }
            return n(s, e), s.prototype.init = function() {
                var t, e, n, i;
                return o(this, void 0, void 0, (function() {
                    var o, s, a = this;
                    return r(this, (function(r) {
                        switch (r.label) {
                            case 0:
                                return null === (t = this.logger) || void 0 === t || t.log("[Discord-sub-channel] init network shims"), this.disableNetworkShims || Ot(this.URLMappings), [4, rt(this.discordSDKPath, "discordSdkScript")];
                            case 1:
                                r.sent(), r.label = 2;
                            case 2:
                                return window.DiscordSDK ? [3, 4] : (null === (e = this.logger) || void 0 === e || e.log("[Discord-sub-channel] waiting for discord sdk to load"), [4, new Promise((function(t) {
                                    return setTimeout(t, 100)
                                }))]);
                            case 3:
                                return r.sent(), [3, 2];
                            case 4:
                                return window.discordSDK || (window.discordSDK = new window.DiscordSDK(this.discordAppID)), o = setTimeout((function() {
                                    var t;
                                    null === (t = a.logger) || void 0 === t || t.error("[Discord-sub-channel] discordSDK ready timeout. Likely wrong or missing appId", a.discordAppID)
                                }), 1e4), [4, window.discordSDK.ready()];
                            case 5:
                                return r.sent(), this.encourageHardwareAcceleration ? [4, window.discordSDK.commands.encourageHardwareAcceleration()] : [3, 7];
                            case 6:
                                s = r.sent(), null === (n = this.logger) || void 0 === n || n.log("[Discord-sub-channel] Hardware Acceleration is ".concat(s.data.enabled ? "enabled" : "disabled")), r.label = 7;
                            case 7:
                                return clearTimeout(o), null === (i = this.logger) || void 0 === i || i.log("[Discord-sub-channel] discordSDK initialized"), [2]
                        }
                    }))
                }))
            }, s.prototype.getId = function() {
                return "discord"
            }, s.prototype.setConfig = function(t) {
                t.gameId;
                var e = t.channels,
                    n = null == e ? void 0 : e.discord;
                this.discordSDKPath = (null == n ? void 0 : n.discordSDKPath) || "assets/discord.iframe.sdk.bundle_patched.js", this.discordAppID = null == n ? void 0 : n.appId, this.URLMappings = _t.concat((null == n ? void 0 : n.URLMappings) || []), this.disableNetworkShims = (null == n ? void 0 : n.disableNetworkShims) || !1, this.encourageHardwareAcceleration = null == n ? void 0 : n.encourageHardwareAcceleration
            }, s.prototype.onModulesUpdated = function(t) {
                var e = t.logger;
                this.logger = e
            }, s.prototype.getBootstrapper = function() {
                return new ft(this.logger)
            }, s.prototype.getAnalyticsProviders = function() {
                return [new t.FRVRAnalytics]
            }, s.prototype.getConsentProvider = function() {
                return t.consentToAllConsentProvider
            }, s.prototype.getAdsProviders = function(t) {
                return []
            }, s.prototype.getShortcutProvider = function() {
                return t.emptyShortcutProvider
            }, s.prototype.getSocialProvider = function() {
                return new Lt(this.logger)
            }, s.prototype.getAuthProviders = function(t, e) {
                return [new mt(t, e, this.discordAppID, this.logger)]
            }, s.prototype.getAdsConfig = function(t) {
                return o(this, void 0, void 0, (function() {
                    return r(this, (function(e) {
                        return [2, t]
                    }))
                }))
            }, s
        }(et),
        Ft = {
            crazygames: {
                "==": [{
                    var: "query.partnerid"
                }, "8289067739"]
            },
            mspwa: {
                or: [{ in: ["app-info://platform/microsoft-store", {
                        var: "document.referrer"
                    }]
                }, {
                    ">=": [{
                        var: "query.mspwa"
                    }, ""]
                }, {
                    ">=": [{
                        var: "query.msstart_sdk_init"
                    }, ""]
                }]
            },
            discord: { in: ["discord.com", {
                    var: "document.referrer"
                }]
            }
        };

    function xt(t) {
        var e = new URLSearchParams(window.location.search),
            n = {
                query: Object.fromEntries(e.entries()),
                document: document
            },
            i = function t(e, n) {
                var i;
                if ("object" != typeof e) return e;
                var o = Object.keys(e)[0],
                    r = e[o];
                switch (o) {
                    case "and":
                        return r.every((function(e) {
                            return t(e, n)
                        }));
                    case "or":
                        return r.some((function(e) {
                            return t(e, n)
                        }));
                    case "<":
                        return t(r[0], n) < t(r[1], n);
                    case ">":
                        return t(r[0], n) > t(r[1], n);
                    case "<=":
                        return t(r[0], n) <= t(r[1], n);
                    case ">=":
                        return t(r[0], n) >= t(r[1], n);
                    case "==":
                        return t(r[0], n) === t(r[1], n);
                    case "!=":
                        return t(r[0], n) !== t(r[1], n);
                    case "var":
                        return r.split(".").reduce((function(t, e) {
                            return t && t[e]
                        }), n);
                    case "in":
                        return (null !== (i = t(r[1], n)) && void 0 !== i ? i : "").includes(t(r[0], n));
                    default:
                        throw new Error("Unknown operator: ".concat(o))
                }
            }(t, n);
        return !!i
    }
    var Vt, jt, zt = [{
        isDetected: function(t) {
            return xt(t.crazygames)
        },
        build: function() {
            return new ut
        }
    }, {
        isDetected: function(t) {
            return xt(t.mspwa)
        },
        build: function() {
            return new gt
        }
    }, {
        isDetected: function(t) {
            return xt(t.discord)
        },
        build: function() {
            return new Mt
        }
    }];
    if (window.FRVR) {
        var Ht = null === (jt = null === (Vt = window.FRVR.config) || void 0 === Vt ? void 0 : Vt.channels) || void 0 === jt ? void 0 : jt.web;
        window.FRVR.setChannel(function(t) {
            null != t || (t = Ft);
            var e = zt.find((function(e) {
                return e.isDetected(t)
            }));
            return e ? e.build() : new et
        }(null == Ht ? void 0 : Ht.subchannelsDetection))
    }
}(FRVRSDK);